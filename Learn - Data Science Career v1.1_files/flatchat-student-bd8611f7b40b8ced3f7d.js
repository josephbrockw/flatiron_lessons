webpackJsonp(["deprecated/flatchat-student"],{"./app/javascript/deprecated/flatchat-student/actions/DMActions.js":function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var r=a("./app/javascript/deprecated/lib/alt.js"),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"getDMs",value:function(){return!0}},{key:"loadingGetDMs",value:function(){return!0}},{key:"updateGetDMs",value:function(e){return e}},{key:"failedGetDMs",value:function(e){return e}},{key:"getDMRoom",value:function(e){return e}},{key:"updateUnreadMessages",value:function(e){return e}},{key:"updateOnlineNofif",value:function(e){return e}},{key:"ding",value:function(e){return e}},{key:"relayNewRoom",value:function(){return!0}},{key:"loadingRelayNewRoom",value:function(){return!0}},{key:"updateRelayNewRoom",value:function(){return!0}},{key:"recieveRelayNewRoom",value:function(e){return e}},{key:"failedRelayNewRoom",value:function(e){return e}}]),e}();e.exports=r.createActions(s)},"./app/javascript/deprecated/flatchat-student/actions/GeneralActions.js":function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var r=a("./app/javascript/deprecated/lib/alt.js"),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"toggleLobbyBlockerModal",value:function(){return!0}},{key:"openDMPanel",value:function(){return!0}},{key:"closeDMPanel",value:function(){return!1}},{key:"toggleDMPanel",value:function(){return!0}},{key:"changeDMPanel",value:function(e){return e}},{key:"pingOnline",value:function(){return!0}},{key:"setState",value:function(e){return e}},{key:"openCodePanel",value:function(){return!0}},{key:"closeCodePanel",value:function(){return!1}},{key:"setWindowDimensions",value:function(e){return e}}]),e}();e.exports=r.createActions(s)},"./app/javascript/deprecated/flatchat-student/actions/LobbyActions.js":function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var r=a("./app/javascript/deprecated/lib/alt.js"),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"getTrackRooms",value:function(){return!0}},{key:"loadingGetTrackRooms",value:function(){return!0}},{key:"updateGetTrackRooms",value:function(e){return e}},{key:"failedGetTrackRooms",value:function(e){return e}},{key:"loadingGetStudyGroupRooms",value:function(){return!0}},{key:"updateGetStudyGroupRooms",value:function(e){return e}},{key:"failedGetStudyGroupRooms",value:function(e){return e}},{key:"getChannelRooms",value:function(){return!0}},{key:"loadingGetChannelRooms",value:function(){return!0}},{key:"updateGetChannelRooms",value:function(e){return e}},{key:"failedGetChannelRooms",value:function(e){return e}},{key:"leaveRoom",value:function(){return!0}},{key:"loadingLeaveRoom",value:function(e){return e}},{key:"updateLeaveRoom",value:function(e){return e}},{key:"failedLeaveRoom",value:function(e){return e}},{key:"relayUnreads",value:function(){return!0}},{key:"loadingRelayUnreads",value:function(){return!0}},{key:"updateRelayUnreads",value:function(){return!0}},{key:"recieveRelayUnreads",value:function(e){return e}},{key:"failedRelayUnreads",value:function(e){return e}},{key:"pullUnreads",value:function(){return!0}},{key:"loadingPullUnreads",value:function(){return!0}},{key:"updatePullUnreads",value:function(e){return e}},{key:"failedPullUnreads",value:function(e){return e}},{key:"markNodeActive",value:function(e){return e}},{key:"updateUnreadMentions",value:function(e){return e}},{key:"clearUnreadRecordsForRoom",value:function(e){return e}},{key:"ding",value:function(e){return e}},{key:"openDMModal",value:function(){return!1}},{key:"closeDMModal",value:function(){return!1}}]),e}();e.exports=r.createActions(s)},"./app/javascript/deprecated/flatchat-student/actions/MessagesActions.js":function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var r=a("./app/javascript/deprecated/lib/alt.js"),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"addMessage",value:function(e){return!0}},{key:"loadingAddMessage",value:function(e){return e}},{key:"updateAddMessage",value:function(e){return e}},{key:"receiveAddMessage",value:function(e){return e}},{key:"failedAddMessage",value:function(e){return e}},{key:"addFile",value:function(e){return!0}},{key:"loadingAddFile",value:function(){return!0}},{key:"updateAddFile",value:function(e){return e}},{key:"failedAddFile",value:function(e){return e}},{key:"sendActivity",value:function(e){return!0}},{key:"loadingActivity",value:function(){return!0}},{key:"updateActivity",value:function(e){return e}},{key:"failedActivity",value:function(e){return e}},{key:"sendLastMessageRead",value:function(e){return!0}},{key:"loadingLastMessageRead",value:function(){return!0}},{key:"updateLastMesssageRead",value:function(e){return e}},{key:"errorLastMessageRead",value:function(e){return console.log("errorLastMessageRead err::",e),e}}]),e}();e.exports=r.createActions(s)},"./app/javascript/deprecated/flatchat-student/actions/RoomsActions.js":function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var r=a("./app/javascript/deprecated/lib/alt.js"),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"getRoom",value:function(){return!0}},{key:"loadingGetRoom",value:function(){return!0}},{key:"updateGetRoom",value:function(e){return e}},{key:"failedGetRoom",value:function(e){return e}},{key:"getMoreMessages",value:function(){return!0}},{key:"loadingGetMoreMessages",value:function(){return!0}},{key:"updateGetMoreMessages",value:function(e){return e}},{key:"failedGetMoreMessages",value:function(e){return e}},{key:"updateArchiveRoom",value:function(e){return e}},{key:"failedArchiveRoom",value:function(e){return e}},{key:"cacheDraft",value:function(e){return e}},{key:"animateMessagesIn",value:function(){return!0}},{key:"animateMessagesOut",value:function(){return!0}},{key:"animateMessagesHalfOut",value:function(){return!0}}]),e}();e.exports=r.createActions(s)},"./app/javascript/deprecated/flatchat-student/actions/UsersActions.js":function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var r=a("./app/javascript/deprecated/lib/alt.js"),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"getDMUsers",value:function(){return!0}},{key:"loadingGetDMUsers",value:function(){return!0}},{key:"updateGetDMUsers",value:function(e){return e}},{key:"failedGetDMUsers",value:function(){return!0}},{key:"getNextDMUsersPage",value:function(){return!0}},{key:"loadingGetNextDMUsersPage",value:function(){return!0}},{key:"updateGetNextDMUsersPage",value:function(e){return e}},{key:"failedGetNextDMUsersPage",value:function(){return!0}},{key:"searchUsers",value:function(e){return e}},{key:"loadingSearchUsers",value:function(e){return e}},{key:"updateSearchUsers",value:function(e){return e}},{key:"failedSearchUsers",value:function(){return!0}},{key:"updateOnline",value:function(e){return e}},{key:"incrementHighlightIndex",value:function(){return!0}},{key:"decrementHighlightIndex",value:function(){return!0}},{key:"updateHighlightIndex",value:function(e){return e}},{key:"searchDMNodeIncrement",value:function(){return!0}},{key:"searchDMNodeDecrement",value:function(){return!0}}]),e}();e.exports=r.createActions(s)},"./app/javascript/deprecated/flatchat-student/app.js":function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=k(a("../../shared/node_modules/domready/ready.js")),s=k(a("../../shared/node_modules/underscore/underscore.js")),o=(k(a("../../shared/node_modules/store/store.js")),a("../../shared/node_modules/react/index.js")),i=k(o),u=k(a("../../shared/node_modules/react-dom/index.js")),l=k(a("../../shared/node_modules/alt-container/lib/AltContainer.js")),c=(k(a("../../shared/node_modules/classnames/index.js")),k(a("../../shared/node_modules/query-string/index.js"))),d=k(a("./app/javascript/deprecated/flatchat-student/actions/GeneralActions.js")),p=k(a("./app/javascript/deprecated/flatchat-student/actions/LobbyActions.js")),h=k(a("./app/javascript/deprecated/flatchat-student/stores/GeneralStore.js")),f=k(a("./app/javascript/deprecated/flatchat-student/stores/UsersStore.js")),m=k(a("./app/javascript/deprecated/flatchat-student/stores/DMStore.js")),g=k(a("./app/javascript/deprecated/flatchat-student/stores/LobbyStore.js")),v=k(a("./app/javascript/deprecated/flatchat-student/stores/RoomsStore.js")),y=k(a("./app/javascript/deprecated/flatchat-student/components/dm/DMUserList.jsx")),_=k(a("./app/javascript/deprecated/flatchat-student/components/dm/DMRoom.jsx")),b=k(a("./app/javascript/deprecated/flatchat-student/components/dm/DMInbox.jsx")),P=k(a("./app/javascript/lib/shared-react-components/InlineSVG.jsx"));function k(e){return e&&e.__esModule?e:{default:e}}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function D(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R=function(e){function t(e){M(this,t);var a=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.PingInterval=null,a}return D(t,o.Component),n(t,[{key:"socketConnect",value:function(){gon.features.deactivate_flatchat_ping||(this.PingInterval=setInterval(d.default.pingOnline,6e4))}},{key:"componentDidMount",value:function(){var e=this;"undefined"!==typeof io&&(io.socket.isConnected()?this.socketConnect():io.socket.on("connect",function(){e.socketConnect()}),io.socket.on("relay",function(e){e.admin||"room_counts"!=e.type||p.default.recieveRelayUnreads(e)})),s.default.delay(function(){gon.features.deactivate_flatchat_ping||(e.PingInterval=setInterval(d.default.pingOnline,6e4)),g.default.pullUnreads()},100),this.loadDMFromQueryString()}},{key:"render",value:function(){return i.default.createElement("div",{className:"site-sidebar--fixed","data-visibility":this.props.showDMPanel?"":"hidden"},i.default.createElement(y.default,null),i.default.createElement(b.default,null),i.default.createElement(_.default,null))}},{key:"loadDMFromQueryString",value:function(){var e=c.default.parse(window.location.search).dm_id;e&&v.default.getRoom({room_id:e,type_of_chat:"direct_message"})}}]),t}(),w=function(e){function t(){return M(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return D(t,o.Component),n(t,[{key:"render",value:function(){return i.default.createElement(l.default,{store:h.default},i.default.createElement(R,null))}}]),t}(),U=function(e){function t(){return M(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return D(t,o.Component),n(t,[{key:"toggleDMPanel",value:function(){d.default.toggleDMPanel(),h.default.state.showDMPanel&&f.default.getDMUsers()}},{key:"render",value:function(){var e=s.default.reduce(this.props.DM.DMs,function(e,t){return e+=t.unread_messages_count||0},0),t="";return e&&(t=i.default.createElement("div",{className:"image-frame__badge image-frame__badge-with-border--color-blue image-frame__badge--top image-frame__badge--count","data-count":e})),i.default.createElement("div",{onClick:this.toggleDMPanel,title:"Direct Messages"},i.default.createElement("div",{className:"image-frame image-frame--has-badge"},i.default.createElement(P.default,{id:"svg__icon--dm",className:"image_frame__image inline-svg--fixed-size-medium"}),t))}}]),t}(),S=function(e){function t(){return M(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return D(t,o.Component),n(t,[{key:"render",value:function(){return i.default.createElement(l.default,{stores:{DM:m.default,General:h.default}},i.default.createElement(U,null))}}]),t}();(0,r.default)(function(){if(gon.enable_chat){var e=document.getElementById("js--direct-messages"),t=document.getElementById("js--direct-messages-toggle");e&&u.default.render(i.default.createElement(w,null),e),t&&u.default.render(i.default.createElement(S,null),t)}})},"./app/javascript/deprecated/flatchat-student/components/RoomControls.jsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=d(a("../../shared/node_modules/jquery/dist/jquery.js")),s=d(a("../../shared/node_modules/underscore/underscore.js")),o=a("../../shared/node_modules/react/index.js"),i=d(o),u=d(a("../../shared/node_modules/react-dom/index.js")),l=d(a("../../shared/node_modules/prop-types/index.js")),c=(d(a("../../shared/node_modules/classnames/index.js")),d(a("../../shared/node_modules/codemirror/lib/codemirror.js")),d(a("../../shared/node_modules/codemirror/mode/ruby/ruby.js")),d(a("../../shared/node_modules/codemirror/mode/javascript/javascript.js")),d(a("./app/javascript/deprecated/lib/chat-textcomplete.js")));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.textCompleteActive=!1,a.lastKeyupEvent=0,a.keyUpAction=a.keyUpAction.bind(a),a.keyDownAction=a.keyDownAction.bind(a),a.focusAction=a.focusAction.bind(a),a.blurAction=a.blurAction.bind(a),a.clickAction=a.clickAction.bind(a),a.changeAction=a.changeAction.bind(a),a.onSubmitTxt=a.onSubmitTxt.bind(a),a.addFileAction=a.addFileAction.bind(a),a.addCodeMirrorPanel=a.addCodeMirrorPanel.bind(a),a.resolveQuestion=a.resolveQuestion.bind(a),a.selectFile=a.selectFile.bind(a),a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),n(t,[{key:"componentDidMount",value:function(){(0,c.default)((0,r.default)(this.refs.chatInput),{getBatchID:function(){return gon.current_user.batch_id},component:this})}},{key:"componentDidUpdate",value:function(){this.props.isVisible&&!this.wasPreviouslyVisible&&u.default.findDOMNode(this.refs.chatInput).focus(),this.wasPreviouslyVisible=this.props.isVisible}},{key:"keyUpAction",value:function(e){var t=e.keycode||e.which;if("```"==e.target.value&&this.addCodeMirrorPanel(e),13===t)return e.preventDefault(),void(this.textCompleteActive||this.onSubmitTxt(e));e.timeStamp-this.lastKeyupEvent>2e3&&""!=e.target.value&&(this.lastKeyupEvent=e.timeStamp,this.props.onActivity())}},{key:"keyDownAction",value:function(e){if(13===(e.keycode||e.which))return e.preventDefault(),!1}},{key:"focusAction",value:function(e){this.props.onFocusTxtInput(e)}},{key:"blurAction",value:function(e){this.props.onBlur(e),e.target.style.height="18px",this.setState({inputVal:"",unlock:!1})}},{key:"clickAction",value:function(e){this.props.onFocusTxtInput(e)}},{key:"changeAction",value:function(e){this.setState({inputVal:e.target.value,unlock:!0})}},{key:"onSubmitTxt",value:function(e){var t=e.target.value.trim();0!==t.length?t.length>1e4?alert("Text input is too big."):(this.props.onSubmitTxt({type:"text",msg:t}),e.target.value="",e.target.style.height="18px",this.setState({inputVal:"",unlock:!1})):alert("No text. Please type something.")}},{key:"addFileAction",value:function(e){var t=new FormData,a=(0,r.default)("input[type=file]")[0].files[0],n=s.default.last(a.name.split(".")).toLowerCase();a?-1!==["gif","jpg","jpeg","png"].indexOf(n)?a.size>1e7?alert("Sorry, file size is too large, please keep it under 10mb."):(t.append("media-image",a),this.props.onAddFile(t)):alert("Sorry, that file type is not allowed."):alert("No file for some reason")}},{key:"addCodeMirrorPanel",value:function(e){e.target.value="",this.props.onOpenCodePanel()}},{key:"resolveQuestion",value:function(e){1==confirm("Are you sure?")&&this.props.onResolveQuestion()}},{key:"selectFile",value:function(e){alert("select file clicked")}},{key:"render",value:function(){if(this.props.draft&&!this.state.unlock)var e=this.props.draft;else e=this.state?this.state.inputVal:"";var t=this.props.onResolveQuestion?i.default.createElement("div",{className:"table-grid table-grid--spread"},i.default.createElement("div",{className:"table-grid__cell table-grid__cell--fill"},i.default.createElement("button",{className:"button button--flush button--layout-block button--color-green",onClick:this.resolveQuestion},"Resolve")),i.default.createElement("div",{className:"table-grid table-grid__cell--fill"},i.default.createElement("button",{className:"button button--flush",onClick:this.openIssueOnGithub},"Open github issue"))):"",a=i.default.createElement("div",{className:"fc--dm-controls util--affix-bottom-right"},i.default.createElement("div",{className:"module--lilypad module--lilypad--background-color-white module--corners-sharp module--lilypad--border-vertical-color-grey-faint"},i.default.createElement("div",{className:"module__foot"},i.default.createElement("div",{className:"col col--size-4of5"},i.default.createElement("textarea",{ref:"chatInput",id:"js--dm-txt-input",className:"js--dm-txt-input input input--textarea-clear input--textarea-hide-scroll",type:"text",placeholder:"Begin typing...",onKeyUp:this.keyUpAction,onKeyDown:this.keyDownAction,onFocus:this.focusAction,onBlur:this.blurAction,onClick:this.clickAction,onChange:this.changeAction,value:e})),i.default.createElement("div",{className:"col col--size-1of5"},i.default.createElement("button",{className:"dm-chat-new-upload",onClick:this.selectFile}),i.default.createElement("label",{className:"dm-chat-new-upload-input"},i.default.createElement("input",{type:"file",name:"file-input",id:"js--dm-file-input",className:"file-input",onChange:this.addFileAction}))),t)),i.default.createElement("div",{className:"module--lilypad module--lilypad--background-color-grey-faintest module--corners-sharp util--text-align-r util--padding-rm util--padding-tm util--padding-bm"},i.default.createElement("span",{className:"heading heading--level-4 heading--weight-lighter heading--font-size-smaller heading--color-grey-light",style:{fontSize:"9px"}},"Tip: Use ` for code snippets")));return this.props.questions&&this.props.questions.currentQuestion&&this.props.questions.currentQuestion.resolved?i.default.createElement("div",null):a}}]),t}();p.propTypes={onActivity:l.default.func.isRequired,onSubmitTxt:l.default.func.isRequired,onAddFile:l.default.func.isRequired,onOpenCodePanel:l.default.func.isRequired,onResolveQuestion:l.default.func,onFocusTxtInput:l.default.func,onBlur:l.default.func,isVisible:l.default.bool,draft:l.default.string},t.default=p},"./app/javascript/deprecated/flatchat-student/components/dm/DMHeader.jsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a("../../shared/node_modules/react/index.js"),s=l(r),o=(l(a("../../shared/node_modules/alt-container/lib/AltContainer.js")),l(a("./app/javascript/deprecated/flatchat-student/actions/GeneralActions.js"))),i=l(a("./app/javascript/deprecated/flatchat-student/stores/GeneralStore.js")),u=l(a("./app/javascript/lib/shared-react-components/InlineSVG.jsx"));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),n(t,[{key:"showDMInbox",value:function(){o.default.changeDMPanel("DMInbox")}},{key:"showRoom",value:function(){o.default.changeDMPanel("DMRoom")}},{key:"showOnlineUsers",value:function(){o.default.changeDMPanel("DMUserList")}},{key:"closeDMPanel",value:function(){o.default.closeDMPanel()}},{key:"render",value:function(){var e,t,a,n;switch(this.props.selectedComponent){case"DMUserList":n=this.showDMInbox,n=i.default.state.hasDMMessages?this.showDMInbox:this.closeDMPanel,t=s.default.createElement("span",{className:"heading heading--color-grey-light"},s.default.createElement("a",{onClick:n,className:"link--color-inherit"},s.default.createElement(u.default,{id:"svg__icon--x",width:14,height:14,fill:"currentColor"})));break;case"DMInbox":a=s.default.createElement("span",{className:"heading heading--color-white heading--level-6"},"Direct Messages"),n=this.closeDMPanel,e=s.default.createElement("span",{className:"heading heading--color-grey-light"},s.default.createElement("a",{onClick:this.showOnlineUsers,className:"link--color-inherit"},s.default.createElement(u.default,{id:"svg__icon--new-message",width:17,height:17,className:"util--pull-right"}))),t=s.default.createElement("span",{className:"heading heading--color-grey-light"},s.default.createElement("a",{onClick:n,className:"link--color-inherit"},s.default.createElement(u.default,{id:"svg__icon--x",width:14,height:14,fill:"currentColor"})));break;case"DMRoom":n=this.showDMInbox,e=s.default.createElement("span",{className:"heading heading--color-grey-light"},s.default.createElement("a",{onClick:this.showDMInbox,className:"link--color-inherit"},s.default.createElement("svg",{width:"5",height:"8",viewBox:"-1 0 5 8",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round"},s.default.createElement("polyline",{points:"4.26818035 4.07502259e-14 0 3.76375835 4.34654001 7.59642156"})),s.default.createElement("span",{className:"heading heading--level-6 heading--color-grey-light"}," Messages"))),t=s.default.createElement("span",{className:"heading heading--color-grey-light"},s.default.createElement("a",{onClick:n,className:"link--color-inherit"},s.default.createElement(u.default,{id:"svg__icon--x",width:14,height:14,fill:"currentColor"})))}return s.default.createElement("div",{className:"module--lilypad module--lilypad--background-color-grey-darker module--corners-sharp"},s.default.createElement("div",{className:"module__head util--text-align-c",style:{padding:"10px 14px 8px 14px"}},s.default.createElement("div",{className:"util--pull-left"},e),a,s.default.createElement("div",{className:"util--pull-right"},t)))}}]),t}();t.default=c},"./app/javascript/deprecated/flatchat-student/components/dm/DMInbox.jsx":function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=v(a("../../shared/node_modules/underscore/underscore.js")),s=a("../../shared/node_modules/react/index.js"),o=v(s),i=v(a("../../shared/node_modules/alt-container/lib/AltContainer.js")),u=v(a("../../shared/node_modules/classnames/index.js")),l=v(a("./app/javascript/deprecated/shared-react-components/TimeAgo.jsx")),c=v(a("./app/javascript/deprecated/flatchat-student/actions/GeneralActions.js")),d=v(a("./app/javascript/deprecated/flatchat-student/stores/DMStore.js")),p=v(a("./app/javascript/deprecated/flatchat-student/stores/GeneralStore.js")),h=v(a("./app/javascript/deprecated/flatchat-student/stores/RoomsStore.js")),f=v(a("./app/javascript/deprecated/flatchat-student/components/dm/DMHeader.jsx")),m=a("./app/javascript/lib/utils/textHelper.js"),g=v(a("./app/javascript/lib/shared-react-components/UserAvatar.jsx"));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P=function(e){function t(){return y(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,s.Component),n(t,[{key:"clickDM",value:function(e,t){var a=e.user;h.default.getRoom({room_id:e.id,type_of_chat:"direct_message",recipient_username:a.learn_username,recipient_user_id:a.id,entry_point:"skinny_dm_thread_switcher"}),c.default.changeDMPanel("DMRoom")}},{key:"render",value:function(){var e=this.props.DM.unread_messages_count,t=this.props.DM.user,a=t.online,n=t.avatar_url,s=t.first_name,i=t.last_name,c=t.learn_uuid,d=t.learn_username,p=this.props.DM.last_message,h=p.content,f=p.timestamp,v=a?"online":"offline",y=(0,m.userDisplayName)({firstName:s,lastName:i,learnUuid:c,learnUsername:d}),_=["util--relative","hoverable"],b="",P="";return e&&(b=o.default.createElement("div",{className:"status-alert__unread status-alert__unread--dm-inbox"},e),_.push("status-alert__unread--dm-list-item")),h&&(P=r.default.unescape(h.split("&#96;").join("").replace(/\&\#x2F\;/g,"/"))),o.default.createElement("li",{className:(0,u.default)(_),onClick:this.clickDM.bind(null,this.props.DM)},o.default.createElement("div",{className:"media-block status-alert","data-status":v},o.default.createElement("div",{className:"media-block__media"},o.default.createElement("div",{className:"image-frame image-frame--fixed-size-xlarge"},o.default.createElement(g.default,{className:"image-frame__image",src:n,size:"medium"}))),o.default.createElement("div",{className:"media-block__content"},o.default.createElement("span",{className:"status-alert__dot util--vertical-align-m util--display-inline-block util--margin-rs"}),o.default.createElement("span",{className:"heading heading--level-4 heading--font-size-smallest "},y),o.default.createElement("div",{className:"heading heading--level-5 heading--weight-lighter heading--color-grey util--truncate-ellipsis",style:{maxWidth:"155px"}},P,b),o.default.createElement("div",{className:"heading heading--level-5 heading--weight-lighter heading--font-size-smaller heading--color-grey"},o.default.createElement(l.default,{date:f||new Date})))))}}]),t}(),k=function(e){function t(){return y(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,s.Component),n(t,[{key:"render",value:function(){var e=this.props.DMs.map(function(e,t){return o.default.createElement(P,{DM:e,key:t})});return o.default.createElement("ul",{className:"fc--dm-inbox-list list list--spacing-none list--separators-grey-faint list--last-child-border"},e)}}]),t}(),M=function(e){function t(){return y(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,s.Component),n(t,[{key:"showDMNew",value:function(){c.default.updateCurrentDMComponent("DMNew")}},{key:"render",value:function(){var e=["fc--dm-panel"];return"DMInbox"===this.props.general.currentDMComponent&&e.push("active"),o.default.createElement("div",{className:(0,u.default)(e)},o.default.createElement(f.default,{selectedComponent:this.props.general.currentDMComponent}),o.default.createElement(k,{DMs:this.props.dm.DMs}))}}]),t}(),j=function(e){function t(){return y(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,s.Component),n(t,[{key:"componentDidMount",value:function(){d.default.getDMs()}},{key:"render",value:function(){return o.default.createElement(i.default,{stores:{dm:d.default,general:p.default}},o.default.createElement(M,null))}}]),t}();e.exports=j},"./app/javascript/deprecated/flatchat-student/components/dm/DMRoom.jsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=y(a("../../shared/node_modules/underscore/underscore.js")),s=a("../../shared/node_modules/react/index.js"),o=y(s),i=y(a("../../shared/node_modules/alt-container/lib/AltContainer.js")),u=y(a("../../shared/node_modules/classnames/index.js")),l=y(a("./app/javascript/deprecated/flatchat-student/actions/RoomsActions.js")),c=y(a("./app/javascript/deprecated/flatchat-student/stores/RoomsStore.js")),d=y(a("./app/javascript/deprecated/flatchat-student/stores/GeneralStore.js")),p=y(a("./app/javascript/deprecated/flatchat-student/stores/DMStore.js")),h=y(a("./app/javascript/deprecated/flatchat-student/components/RoomControls.jsx")),f=y(a("./app/javascript/deprecated/flatchat-student/components/shared/ActiveRoomMessages.jsx")),m=y(a("./app/javascript/deprecated/flatchat-student/components/dm/DMHeader.jsx")),g=a("./app/javascript/lib/utils/textHelper.js"),v=y(a("./app/javascript/lib/shared-react-components/UserAvatar.jsx"));function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=function(e){function t(){return _(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,s.Component),n(t,[{key:"render",value:function(){var e=this.props,t=e.online,a=e.avatar_url,n=e.first_name,r=e.last_name,s=e.learn_username,i=e.learn_uuid,u=t?"online":"offline",l=(0,g.userDisplayName)({firstName:n,lastName:r,learnUuid:i,learnUsername:s});return o.default.createElement("div",{className:"module"},o.default.createElement("div",{className:"media-block media-block--spacing-tight status-alert","data-status":u},o.default.createElement("div",{className:"media-block__media"},o.default.createElement("div",{className:"image-frame image-frame--fixed-size-medium image-frame--has-badge image-frame--border-radius-full"},o.default.createElement(v.default,{className:"image-frame__image",src:a,size:"small"}))),o.default.createElement("div",{className:"media-block__content"},o.default.createElement("span",{className:"status-alert__dot util--vertical-align-m util--display-inline-block util--margin-rs"}),o.default.createElement("span",{className:"heading heading--level-4 heading--font-size-smallest"},l),o.default.createElement("span",{className:"heading heading--level-5 heading--color-grey-light"},"@",s))))}}]),t}(),M=function(e){function t(e){_(this,t);var a=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.addMessage=a.addMessage.bind(a),a.sendActivity=a.sendActivity.bind(a),a.addFile=a.addFile.bind(a),a}return P(t,s.Component),n(t,[{key:"sendActivity",value:function(){this.props.rooms.activeRoom.id&&c.default.sendActivity()}},{key:"addMessage",value:function(e){this.props.rooms.activeRoom.id?(c.default.addMessage(e),r.default.delay(function(){p.default.getDMs()},500)):alert("No active room!")}},{key:"addFile",value:function(e){this.props.rooms.activeRoom.id?c.default.addFile(e):alert("No active room!")}},{key:"openCodePanel",value:function(){}},{key:"cacheDraft",value:function(e){l.default.cacheDraft(e.target.value)}},{key:"scrollHitBottom",value:function(){}},{key:"sendLastRead",value:function(){}},{key:"render",value:function(){var e=["fc--dm-panel"];"DMRoom"===this.props.general.currentDMComponent&&e.push("active");var t="";if(this.props.rooms.activeRoom.otherUsers)t=o.default.createElement(k,this.props.rooms.activeRoom.otherUsers[0].user);var a="";return this.props.rooms.isLoading&&(a=o.default.createElement("div",{className:"module util--padding-ts util--text-align-c util--pull-center"},o.default.createElement("ul",{className:"chat-room-activity big-activity"},o.default.createElement("li",null),o.default.createElement("li",null),o.default.createElement("li",null),o.default.createElement("li",null)))),o.default.createElement("div",{className:(0,u.default)(e)},o.default.createElement(m.default,{selectedComponent:this.props.general.currentDMComponent}),a,t,o.default.createElement("div",{className:"module__body fc--dm-message-list util--padding-tl",id:"fc--message-list"},o.default.createElement(f.default,{activeRoom:this.props.rooms.activeRoom,onScrollHitsBottom:this.scrollHitBottom})),o.default.createElement(h.default,{onActivity:this.sendActivity,onSubmitTxt:this.addMessage,onAddFile:this.addFile,onOpenCodePanel:this.openCodePanel,onFocusTxtInput:this.sendLastRead,onBlur:this.cacheDraft,isVisible:"DMRoom"===this.props.general.currentDMComponent,draft:this.props.rooms.drafts[this.props.rooms.activeRoom.id]}))}}]),t}(),j=function(e){function t(){return _(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,s.Component),n(t,[{key:"render",value:function(){return o.default.createElement(i.default,{stores:{rooms:c.default,general:d.default}},o.default.createElement(M,null))}}]),t}();t.default=j},"./app/javascript/deprecated/flatchat-student/components/dm/DMUserList.jsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a("../../shared/node_modules/react/index.js"),s=y(r),o=y(a("../../shared/node_modules/react-dom/index.js")),i=y(a("../../shared/node_modules/alt-container/lib/AltContainer.js")),u=y(a("../../shared/node_modules/classnames/index.js")),l=y(a("../../shared/node_modules/react-waypoint/cjs/index.js")),c=y(a("./app/javascript/deprecated/flatchat-student/actions/GeneralActions.js")),d=y(a("./app/javascript/deprecated/flatchat-student/actions/UsersActions.js")),p=y(a("./app/javascript/deprecated/flatchat-student/stores/UsersStore.js")),h=y(a("./app/javascript/deprecated/flatchat-student/stores/GeneralStore.js")),f=y(a("./app/javascript/deprecated/flatchat-student/stores/RoomsStore.js")),m=y(a("./app/javascript/deprecated/flatchat-student/components/dm/DMHeader.jsx")),g=a("./app/javascript/lib/utils/textHelper.js"),v=y(a("./app/javascript/lib/shared-react-components/UserAvatar.jsx"));function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=function(e){function t(e){_(this,t);var a=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getRoom=a.getRoom.bind(a),a.highlightUser=a.highlightUser.bind(a),a}return P(t,r.Component),n(t,[{key:"getRoom",value:function(){f.default.getRoom({user_ids:[this.props.user.id,gon.current_user.id],type_of_chat:"direct_message",recipient_username:this.props.user.learn_username,recipient_user_id:this.props.user.id,entry_point:"skinny_dm_search"}),c.default.changeDMPanel("DMRoom")}},{key:"getNextDMUsersPage",value:function(){p.default.getNextDMUsersPage()}},{key:"highlightUser",value:function(){d.default.updateHighlightIndex(this.props.index)}},{key:"render",value:function(){var e=this.props.user,t=e.online,a=e.lastLoaded,n=e.learn_username,r=e.avatar_url,o=e.first_name,i=e.last_name,c=e.learn_uuid,d=t?"online":"offline",p=(0,g.userDisplayName)({firstName:o,lastName:i,learnUuid:c,learnUsername:n}),h="";a&&(h=s.default.createElement(l.default,{onEnter:this.getNextDMUsersPage}));var f=["hoverable"];return this.props.isHighlighted&&f.push("status-alert__unread--dm-list-item"),s.default.createElement("li",{onMouseOver:this.highlightUser,className:(0,u.default)(f)},h,s.default.createElement("div",{onClick:this.getRoom,className:"media-block media-block--spacing-tight status-alert","data-status":d},s.default.createElement("div",{className:"media-block__media"},s.default.createElement("div",{className:"image-frame image-frame--fixed-size-large image-frame--has-badge"},s.default.createElement(v.default,{className:"image-frame__image",src:r,size:"medium"}))),s.default.createElement("div",{className:"media-block__content"},s.default.createElement("span",{className:"status-alert__dot util--vertical-align-m util--display-inline-block util--margin-rs"}),s.default.createElement("span",{className:"heading heading--level-4 heading--font-size-smallest "},p),s.default.createElement("div",{className:"heading heading--level-5 heading--color-grey-light heading--weight-lighter"},"@",n))))}}]),t}(),M=function(e){function t(){return _(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,r.Component),n(t,[{key:"render",value:function(){var e=this,t=this.props.users.map(function(t,a){var n=e.props.highlightedUserIndex===a;return s.default.createElement(k,{key:a,user:t,index:a,isHighlighted:n})});return s.default.createElement("ul",{style:{width:"100%"},className:"fc--dm-user-list list list--spacing-none list--separators-grey-faint list--last-child-border"},t)}}]),t}(),j=function(e){function t(e){_(this,t);var a=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.searchUsers=a.searchUsers.bind(a),a}return P(t,r.Component),n(t,[{key:"searchUsers",value:function(e){if(38!==e.keyCode)if(40!==e.keyCode){if(13===e.keyCode){var t=this.props.users.filteredDMUsers[this.props.users.highlightedUserIndex];return f.default.getRoom({user_ids:[t.id,gon.current_user.id],type_of_chat:"direct_message",recipient_username:t.learn_username,recipient_user_id:t.id,entry_point:"skinny_dm_search"}),void c.default.changeDMPanel("DMRoom")}p.default.searchUsers(e.target.value)}else d.default.incrementHighlightIndex();else d.default.decrementHighlightIndex()}},{key:"componentDidUpdate",value:function(){this.isVisible()&&!this.wasPreviouslyVisible&&o.default.findDOMNode(this.refs.userSearchInput).focus(),this.wasPreviouslyVisible=this.isVisible()}},{key:"isVisible",value:function(){return this.props.general.showDMPanel&&"DMUserList"===this.props.general.currentDMComponent}},{key:"render",value:function(){var e=["fc--dm-panel"];this.props.users.DMUsers,this.props.users.currentSearch;return this.isVisible()&&e.push("active"),s.default.createElement("div",{className:(0,u.default)(e)},s.default.createElement(m.default,{selectedComponent:this.props.general.currentDMComponent,hasDMMessages:this.props.general.hasDMMessages}),s.default.createElement("div",{className:"module module--spacious"},s.default.createElement("div",{className:"media-block media-block--spacing-tightest"},s.default.createElement("div",{className:"media-block__media"},s.default.createElement("label",{className:"heading heading--color-grey-dark heading--level-5 util--margin-lm"},"To:")),s.default.createElement("div",{className:"media-block__media"},s.default.createElement("input",{ref:"userSearchInput",onKeyUp:this.searchUsers,type:"text",className:"input input--border-none input--padding-none util--padding-ll"})))),s.default.createElement(M,{highlightedUserIndex:this.props.users.highlightedUserIndex,users:this.props.users.filteredDMUsers}))}}]),t}(),D=function(e){function t(){return _(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,r.Component),n(t,[{key:"render",value:function(){return s.default.createElement(i.default,{stores:{users:p.default,general:h.default}},s.default.createElement(j,null))}}]),t}();t.default=D},"./app/javascript/deprecated/flatchat-student/components/shared/ActiveRoomMessages.jsx":function(e,t,a){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=f(a("../../shared/node_modules/underscore/underscore.js")),o=a("../../shared/node_modules/react/index.js"),i=f(o),u=(f(a("../../shared/node_modules/classnames/index.js")),f(a("../../shared/node_modules/prop-types/index.js"))),l=f(a("./app/javascript/deprecated/lib/emojify.js")),c=(f(a("../../shared/node_modules/codemirror/lib/codemirror.js")),f(a("../../shared/node_modules/codemirror/mode/ruby/ruby.js")),f(a("../../shared/node_modules/codemirror/mode/javascript/javascript.js")),f(a("./app/javascript/deprecated/flatchat-student/components/shared/RoomBlankSlate.jsx"))),d=f(a("./app/javascript/deprecated/shared-react-components/TimeAgo.jsx")),p=(f(a("./app/javascript/lib/shared-react-components/InlineSVG.jsx")),a("./app/javascript/lib/utils/textHelper.js")),h=f(a("./app/javascript/lib/shared-react-components/UserAvatar.jsx"));function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a("./app/javascript/deprecated/lib/textcomplete.js"),a("./app/javascript/deprecated/vendor/autolink-min.js");var y=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,o.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.first_name,a=e.last_name,n=e.avatar_url,r=e.user_id,s=e.learn_username,o=e.learn_uuid,u=(0,p.userDisplayName)({firstName:t,lastName:a,learnUuid:o,learnUsername:s});return i.default.createElement("div",{className:"hovercard hovercard__trigger hovercard__content--sidebar-bottom-right hovercard__user-avatar","data-toggle":"tooltip","data-title":u,"data-user-full-name":u,"data-avatar":n,"data-username":s,"data-user-id":r},i.default.createElement("a",{href:"/"+s,target:"_blank",rel:"noopener noreferrer"},i.default.createElement("div",{className:"image-frame image-frame--border-radius-small image-frame--fixed-size-medium"},i.default.createElement(h.default,{className:"image-frame__image",src:n,size:"small"}))))}}]),t}(),_=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,o.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.first_name,a=e.last_name,n=e.timestamp,r=e.learn_username,s=e.learn_uuid,o=(0,p.userDisplayName)({firstName:t,lastName:a,learnUuid:s,learnUsername:r});return i.default.createElement("span",null,i.default.createElement("span",{className:"heading heading--level-4 heading--font-size-smallest"},o),i.default.createElement("span",{className:"heading heading--level-5 heading--weight-lighter heading--font-size-smaller heading--color-grey"},"\xa0",i.default.createElement(d.default,{date:n})))}}]),t}(),b=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,o.Component),r(t,[{key:"render",value:function(){var e=!1,t=this.props.skinny?{maxWidth:"185px"}:{},a=this.props.msg.autoLink({callback:function(t){t&&(e=!0)},target:"_blank",ref:"noopener noreferrer"});if(e||this.props.hasEmoji||this.props.allowHTML)var n={__html:a.autoLink({target:"_blank",ref:"noopener noreferrer"})},r=i.default.createElement("span",{dangerouslySetInnerHTML:n});else r=i.default.createElement("span",null,a);return i.default.createElement("li",null,i.default.createElement("div",{className:"media-block media-block--vertical-align-top"},i.default.createElement("div",{className:"media-block__media util--padding-lm"},i.default.createElement(y,this.props)),i.default.createElement("div",{className:"media-block__content media-block__content--fill util--padding-rm dm-txt-node-content"},i.default.createElement(_,this.props),i.default.createElement("div",{style:t,className:"heading--level-4 heading--weight-lighter util--break-word"},r))))}}]),t}(),P=function(e){return i.default.createElement("li",null,i.default.createElement("div",{className:"media-block media-block--vertical-align-top"},i.default.createElement("div",{className:"media-block__media util--padding-lm"},i.default.createElement(y,e)),i.default.createElement("div",{className:"media-block__content media-block__content--fill util--padding-rm dm-txt-node-content"},i.default.createElement(_,e),i.default.createElement("div",{style:e.skinny?{maxWidth:"185px"}:{},className:"heading heading--level-4 heading--weight-lighter",dangerouslySetInnerHTML:e.msg}))))},k=function(e){return i.default.createElement("li",null,i.default.createElement("div",{className:"media-block media-block--vertical-align-top"},i.default.createElement("div",{className:"media-block__media util--padding-lm"},i.default.createElement(y,e)),i.default.createElement("div",{className:"media-block__content media-block__content--fill "},i.default.createElement(_,e),i.default.createElement("pre",{className:"code-block util--margin-tm"},i.default.createElement("code",{className:"code-block__code"},e.msg)))))},M=function(e){return i.default.createElement("li",null,i.default.createElement("div",{className:"media-block media-block--vertical-align-top"},i.default.createElement("div",{className:"media-block__media util--padding-lm"},i.default.createElement(y,e)),i.default.createElement("div",{className:"media-block__content media-block__content--fill dm-img-node-content"},i.default.createElement(_,e),i.default.createElement("div",{className:"image-frame"},i.default.createElement("img",{className:"image-frame__image util--margin-tm img-message",src:e.src})))))},j=function(e){return i.default.createElement("li",null,i.default.createElement("div",{className:"fc--new-message-bar"}),i.default.createElement("div",{className:"heading heading--level-5 fc--new-message-message"},"New Messages"))},D=function(e){function t(){return m(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,o.Component),r(t,[{key:"render",value:function(){var e=this,t=i.default.createElement(c.default,{room:this.props.activeRoom});this.props.activeRoom.messages&&(this.props.activeRoom.messages.length>0||this.isStudyGroupRoom())&&(t=this.props.activeRoom.messages.map(function(t,a){var r=!1;switch(t.type){case"new-messages-slug":return i.default.createElement(j,{key:t.id});case"image":var o=s.default.unescape(t.content.replace(/\&\#x2F\;/g,"/"));return i.default.createElement(M,n({key:t.id,src:o},t));case"code":o=s.default.unescape(t.content.replace(/\&\#x2F\;/g,"/"));return i.default.createElement(k,n({key:t.id,msg:o},t));case"txt":default:r=!1;if(o=(o=t.content.split("&#96;").join("`").replace(/`(.*?)`/g,function(e,t,a){return t&&(r=!0),'<code class="special--code-inline">'+t+"</code>"})).replace(/\&\#x2F\;/g,"/"),r)return i.default.createElement(P,n({key:t.id,msg:e.createMarkup(o)},t));var u=!1,c=l.default.replace(s.default.unescape(o));return c!==o&&(o=c,u=!0),i.default.createElement(b,n({key:t.id,msg:o,hasEmoji:u,skinny:e.props.skinny},t))}}),this.showStudyGroupWelcomeMsg()&&t.unshift(this.studyGroupWelcomeComponent()));var a="list list--spacing-large list--last-child-padding list--first-child-padding";return this.props.animationClass&&(a+=" li-animation-"+this.props.animationClass),i.default.createElement("ul",{onScroll:this.props.scrollAction,className:a},t)}},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"isStudyGroupRoom",value:function(){return this.props.activeRoom.policy.study_group_id}},{key:"showStudyGroupWelcomeMsg",value:function(){return this.isStudyGroupRoom()&&this.props.activeRoom.paginationBlock}},{key:"studyGroupWelcomeComponent",value:function(){return i.default.createElement(b,{key:"study_group_welcome",msg:'Welcome to your Study Group! To get the most out of your time together, use a videoconferencing platform like <a href="https://zoom.us/" target="blank" rel="noopener noreferrer">Zoom</a>, <a href="https://hangouts.google.com/" target="blank" rel="noopener noreferrer">Google Hangouts</a> or your preferred tool. Happy learning together!',hasEmoji:!1,skinny:!1,allowHTML:!0,info:this.studyGroupWelcomeMsg()})}},{key:"studyGroupWelcomeMsg",value:function(){return{id:"study_group_welcome",avatar_url:"/assets/flatchat/learnbot_avatar.png",username:"learnbot",timestamp:this.props.activeRoom.timestamp}}}]),t}();D.propTypes={activeRoom:u.default.object.isRequired,skinny:u.default.bool,animationClass:u.default.string},D.defaultProps={skinny:!0},e.exports=D},"./app/javascript/deprecated/flatchat-student/components/shared/RoomBlankSlate.jsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a("../../shared/node_modules/react/index.js"),s=u(r),o=u(a("../../shared/node_modules/prop-types/index.js")),i=a("./app/javascript/lib/utils/textHelper.js");function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),n(t,[{key:"_getUserName",value:function(){var e=this.props.room.otherUsers[0];return e&&e.user?(0,i.userDisplayName)({firstName:e.user.first_name,lastName:e.user.last_name,learnUsername:e.user.learn_username,learnUuid:e.user.learn_uuid}):"this user"}},{key:"_getBlankCopy",value:function(){var e="";return 2===this.props.room.visibility?(e="Start your conversation with ",e+=this._getUserName(),e+=" now. Keep in mind that these direct messages will always remain private."):e=this.props.room.friendly_name?"This is the beginning of "+this.props.room.friendly_name+".":"Loading...",e}},{key:"render",value:function(){var e=this._getBlankCopy();return s.default.createElement("section",{className:"module"},s.default.createElement("h2",{className:"heading heading--level-2 heading--font-size-smaller"},e))}}]),t}();l.propTypes={room:o.default.object.isRequired},t.default=l},"./app/javascript/deprecated/flatchat-student/sources/DMSource.js":function(e,t,a){"use strict";var n=a("./app/javascript/deprecated/flatchat-student/actions/DMActions.js"),r=a("./app/javascript/deprecated/lib/server-time.js"),s={getDMs:function(){return{remote:function(e,t){return new Promise(function(e,t){io.socket.get("/rooms/"+gon.current_user_id+"/dm",{},function(t,a){r.sync(a["x-flatchat-timestamp"]),e(t)})})},loading:n.loadingGetDMs,success:n.updateGetDMs,error:n.failedGetDMs}},getDMRoom:function(e){return{remote:function(e){},loading:n.loadingGetDMRoom,success:n.updateGetDMRoom,error:n.failedGetDMRoom}},relayNewRoom:function(){return{remote:function(e,t){return new Promise(function(a,n){t.relay_type="new_room",console.log("Send data for relay new room::::",t,e),io.socket.post("/relay",t,function(e,t){a(e)})})},success:n.updateRelayNewRoom,error:n.failedRelayNewRoom}}};e.exports=s},"./app/javascript/deprecated/flatchat-student/sources/LobbySource.js":function(e,t,a){"use strict";var n=a("./app/javascript/deprecated/flatchat-student/actions/LobbyActions.js"),r=(a("../../shared/node_modules/jquery/dist/jquery.js"),a("./app/javascript/deprecated/lib/server-time.js")),s={getTrackRooms:function(){return{remote:function(e,t){return new Promise(function(e,t){io.socket.get("/rooms/"+gon.current_user_id+"/track",{},function(t,a){r.sync(a["x-flatchat-timestamp"]),e(t)})})},loading:n.loadingGetTrackRooms,success:n.updateGetTrackRooms,error:n.failedGetTrackRooms}},getStudyGroupRooms:function(){return{remote:function(e,t){return new Promise(function(e,t){io.socket.get("/rooms/"+gon.current_user_id+"/study_group",{},function(t,a){r.sync(a["x-flatchat-timestamp"]),e(t)})})},loading:n.loadingGetStudyGroupRooms,success:n.updateGetStudyGroupRooms,error:n.failedGetStudyGroupRooms}},getChannelRooms:function(){return{remote:function(e,t){return new Promise(function(e,t){io.socket.get("/rooms/"+gon.current_user_id+"/channel",{},function(t,a){r.sync(a["x-flatchat-timestamp"]),e(t)})})},loading:n.loadingGetChannelRooms,success:n.updateGetChannelRooms,error:n.failedGetChannelRooms}},leaveRoom:function(){return{remote:function(e,t){return new Promise(function(e,a){n.loadingLeaveRoom(t),io.socket.post("/room/leave",{room_id:t},function(t,a){r.sync(a["x-flatchat-timestamp"]),e(t)})})},loading:n.loadingLeaveRoom,success:n.updateLeaveRoom,error:n.failedLeaveRoom}},relayUnreads:function(){return{remote:function(e,t){return new Promise(function(t,a){var n={relay_type:"room_counts",unread_messages:e.unread_messages_total,unread_mentions:e.unread_mentions_total};io.socket.post("/relay",n,function(e,a){t(e)})})},success:n.updateRelayUnreads,error:n.failedRelayUnreads}},pullUnreads:function(){return{remote:function(e,t){return new Promise(function(e,t){io.socket.get("/relay",{relay_type:"room_counts"},function(t,a){e(t)})})},success:n.updatePullUnreads,error:n.failedPullUnreads}}};e.exports=s},"./app/javascript/deprecated/flatchat-student/sources/MessagesSource.js":function(e,t,a){"use strict";var n=a("../../shared/node_modules/jquery/dist/jquery.js"),r=a("./app/javascript/deprecated/flatchat-student/actions/MessagesActions.js"),s={addMessage:function(){return{remote:function(e,t){return new Promise(function(a,n){if(t.msg.length>1e4)return a("Message input too large, Nice try.");if(!e.activeRoom.id)return n("No room! Select one.");var s={type:t.type||"text",content:t.msg,user_id:gon.current_user_id,room_id:e.activeRoom.id,room_uuid:e.activeRoom.uuid,has_enrolled:gon.current_user.has_enrolled,has_learn_badge:gon.current_user.has_learn_badge,lesson_id:e.activeRoom.lesson_id,ref_id:e.activeRoom.ref_id,in_lobby:t.in_lobby||!1};r.loadingAddMessage(s),io.socket.post("/messages",s,function(e,t){a(e)})})},loading:r.loadingAddMessage,success:r.updateAddMessage,error:r.failedAddMessage}},addFile:function(){return{remote:function(e,t){return new Promise(function(a,r){var s={type:"image",message_source_id:2,user_id:gon.current_user_id,room_id:e.activeRoom.id,room_uuid:e.activeRoom.uuid};n.ajax({url:io.sails.url+"/messages/image",type:"POST",data:t,processData:!1,contentType:!1,uploadProgress:function(e,t,a){},success:function(e){s.content=e.content,io.socket.post("/messages",s,function(e){return console.log("data coming back from file uploads",e),a(e)})}})})},loading:r.loadingAddFile,success:r.updateAddFile,error:r.failedAddFile}},sendActivity:function(){return{remote:function(e,t){return new Promise(function(t,a){if(!e.activeRoom.id)return a("No room man");var n={user_id:gon.current_user_id,room_id:e.activeRoom.id,room_uuid:e.activeRoom.uuid};io.socket.post("/room/activity",n,function(e){return t(e)})})},loading:r.loadingActivity,success:r.updateActivity,error:r.failedActivity}},sendLastMessageRead:function(){return{remote:function(e,t){return new Promise(function(a,n){if(e.activeRoom.messages){var r=e.activeRoom.messages[e.activeRoom.messages.length-1];if(!e.activeRoom.id)return n("No room.");if(!r)return a({});var s={user_id:gon.current_user_id,room_id:e.activeRoom.id,room_uuid:e.activeRoom.uuid,message_id:r.id,isLooking:t.isLooking};io.socket.put("/room_members/"+s.room_id+"/last",s,function(e){return a(e)})}})},success:r.updateLastMesssageRead,error:r.errorLastMessageRead}}};e.exports=s},"./app/javascript/deprecated/flatchat-student/sources/RoomsSource.js":function(e,t,a){"use strict";var n=a("./app/javascript/deprecated/flatchat-student/actions/RoomsActions.js"),r={getRoom:function(){return{remote:function(e,t){return n.getRoom(),new Promise(function(e,a){var n={};t.room_id?n.room_id=t.room_id:t.user_ids&&(n.user_ids=t.user_ids),n.user_id=gon.current_user_id,io.socket.post("/room/join-or-create",n,function(a,n){!function(e){var t=e.type_of_chat,a=e.recipient_username,n=e.recipient_user_id,r=e.entry_point;analytics.track("Opened Chat Thread",{type:t||"Not Provided",pretty_recipient:a||"Not Provided",numeric_recipient:n||"Not Provided",category:"Chat",label:"Learn",entry_point:r||"Not Provided"})}(t),a.entry_point=t.entry_point,e(a)})})},loading:n.loadingGetRoom,success:n.updateGetRoom,error:n.failedGetRoom}},getMoreMessages:function(){return n.loadingGetMoreMessages(),{remote:function(e,t){return new Promise(function(t,a){var n={};if(e.activeRoom){if(e.activeRoom.paginationBlock)return void t([]);n.room_id=e.activeRoom.id,n.page=e.activeRoom.currentPage+1||1,e.activeRoom.messageOffset>0&&(n.offset=e.activeRoom.messageOffset)}else console.log("Somethings wrong with getMoreMessages");io.socket.get("/room/messages",n,function(e,a){t(e)})})},loading:n.loadingGetMoreMessages,success:n.updateGetMoreMessages,error:n.failedGetMoreMessages}},archiveRoom:function(){return{remote:function(e,t){return new Promise(function(e,a){io.socket.delete("/rooms/"+t,{id:t},function(t){e(t)})})},success:n.updateArchiveRoom,error:n.failedArchiveRoom}}};e.exports=r},"./app/javascript/deprecated/flatchat-student/sources/UsersSource.js":function(e,t,a){"use strict";var n=a("../../shared/node_modules/underscore/underscore.js"),r=a("./app/javascript/deprecated/flatchat-student/actions/UsersActions.js"),s={getDMUsers:function(){return{remote:function(e,t){return new Promise(function(t,a){var n={track_id:e.currentTrackID,batch_id:e.currentBatchID,page:e.DMUsersPage};io.socket.get("/users",n,function(e,a){t(e)})})},loading:r.loadingGetDMUsers,success:r.updateGetDMUsers,error:r.failedGetDMUsers}},getNextDMUsersPage:function(){return{remote:function(e,t){return new Promise(function(t,a){var n={track_id:e.currentTrackID,batch_id:e.currentBatchID,page:e.DMUsersPage+1};io.socket.get("/users",n,function(e,a){t(e)})})},loading:r.loadingGetNextDMUsersPage,success:r.updateGetNextDMUsersPage,error:r.failedGetNextDMUsersPage}},searchUsers:function(){var e=n.throttle(function(e,t){return new Promise(function(e,a){var n={track_id:gon.chat_data.track_id,batch_id:gon.chat_data.batch_id,search:t};io.socket.get("/users",n,function(t,a){e(t)})})},250);return{remote:function(t,a){return r.loadingSearchUsers(a),e(t,a)},success:r.updateSearchUsers,error:r.failedSearchUsers}}};e.exports=s},"./app/javascript/deprecated/flatchat-student/stores/DMStore.js":function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var r=a("../../shared/node_modules/underscore/underscore.js"),s=a("./app/javascript/deprecated/lib/alt.js"),o=a("./app/javascript/deprecated/flatchat-student/sources/DMSource.js"),i=a("./app/javascript/deprecated/flatchat-student/actions/DMActions.js"),u=a("./app/javascript/deprecated/flatchat-student/actions/RoomsActions.js"),l=a("./app/javascript/deprecated/flatchat-student/stores/RoomsStore.js"),c=a("./app/javascript/deprecated/flatchat-student/stores/GeneralStore.js"),d=a("./app/javascript/deprecated/lib/sound-manager.js"),p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DMs=[],this.bindListeners({handleGetDMs:i.getDMs,handleLoadingGetDMs:i.loadingGetDMs,handleUpdateGetDMs:i.updateGetDMs,handleFailedGetDMs:i.failedGetDMs,handleUpdateUnreadMessages:i.updateUnreadMessages,handleUpdateGetRoom:u.updateGetRoom,handleDMOnlineNotif:i.updateOnlineNofif,handleDing:i.ding}),this.exportAsync(o);var t=this;!function e(a){a=a||0;console.log("Attempt, attachSocketListeners ",a);if(a>20)return;"undefined"!==typeof io?(io.socket.on("unread_messages",i.updateUnreadMessages),io.socket.on("msg",function(e){2==e.visibility&&t.getInstance().getDMs()})):(a++,r.delay(function(){return e(a)},100))}()}return n(e,[{key:"handleDMOnlineNotif",value:function(e){var t=r.find(this.DMs,function(t){return t.user.id==e.id});t&&(t.user.online=e.online)}},{key:"handleDing",value:function(e){if(!e.admin){if(e.room_id==e.activeRoomId){if(!document.webkitHidden)return;d.play("new-activity")}r.find(this.DMs,function(t){return t.id==e.room_id})&&d.play("new-activity")}}},{key:"handleGetDMs",value:function(){}},{key:"handleLoadingGetDMs",value:function(){}},{key:"handleUpdateGetDMs",value:function(e){this.DMs=e}},{key:"handleFailedGetDMs",value:function(){}},{key:"handleUpdateUnreadMessages",value:function(e){var t=l.state.activeRoom,a=c.state.showDMPanel,n=c.state.currentDMComponent;t&&t.id===e.room_id&&(a&&"DMRoom"===n)&&(e.unread_messages_count=0);var s=r.findWhere(this.DMs,{id:e.id});s&&(s.unread_messages_count=e.unread_messages_count,s.last_message=e.last_message)}},{key:"handleUpdateGetRoom",value:function(e){(e=r.find(this.DMs,function(t){return t.id===parseInt(e.id)}))&&(e.unread_messages_count=0)}}]),e}();e.exports=s.createStore(p,"DMStore")},"./app/javascript/deprecated/flatchat-student/stores/GeneralStore.js":function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=u(a("./app/javascript/deprecated/lib/alt.js")),s=u(a("./app/javascript/deprecated/flatchat-student/actions/GeneralActions.js")),o=u(a("./app/javascript/deprecated/flatchat-student/actions/DMActions.js")),i=(u(a("./app/javascript/deprecated/flatchat-student/stores/UsersStore.js")),u(a("./app/javascript/deprecated/flatchat-student/actions/RoomsActions.js")));function u(e){return e&&e.__esModule?e:{default:e}}var l=["DM","LOBBY"],c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.showDMPanel=!1,this.appState="DM",this.currentDMComponent="DMUserList",this.showCodePanel=!1,this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.LobbyBlockerModalOpen=!1,this.bindListeners({handleSetState:s.default.setState,handleOpenDMPanel:s.default.openDMPanel,handleCloseDMPanel:s.default.closeDMPanel,handleToggleDMPanel:s.default.toggleDMPanel,handleChangeDMPanel:s.default.changeDMPanel,handlePingOnline:s.default.pingOnline,handleUpdateGetDMs:o.default.updateGetDMs,handleUpdateUnreadMessages:o.default.updateUnreadMessages,handleLoadingGetRoom:i.default.loadingGetRoom,handleOpenCodePanel:s.default.openCodePanel,handleCloseCodePanel:s.default.closeCodePanel,handleSetWindowDimensions:s.default.setWindowDimensions,handleToggleLobbyBlockerModal:s.default.toggleLobbyBlockerModal}),this.hasDMMessages=!1}return n(e,[{key:"handleToggleLobbyBlockerModal",value:function(){this.LobbyBlockerModalOpen=!this.LobbyBlockerModalOpen}},{key:"handleSetState",value:function(e){l.indexOf(e)>-1&&(this.appState=e)}},{key:"handleLoadingGetRoom",value:function(){this.showDMPanel=!0,this.currentDMComponent="DMRoom"}},{key:"handleOpenDMPanel",value:function(e){this.showDMPanel=e}},{key:"handleCloseDMPanel",value:function(e){this.showDMPanel=e,this.setClosedDMPanelStyles()}},{key:"handleToggleDMPanel",value:function(){if(this.showDMPanel=!this.showDMPanel,this.showDMPanel)return this.setOpenDMPanelStyles(),this.hasDMMessages?this.currentDMComponent="DMInbox":this.currentDMComponent="DMUserList";this.setClosedDMPanelStyles()}},{key:"setOpenDMPanelStyles",value:function(){var e=document.getElementById("js--region-sidebar"),t=document.getElementById("js--dm-arrow");e&&e.classList.add("fc-adj-sidebar"),t.classList.add("active"),t.setAttribute("data-state","active")}},{key:"setClosedDMPanelStyles",value:function(){var e=document.getElementById("js--region-sidebar"),t=document.getElementById("js--dm-arrow");e&&e.classList.remove("fc-adj-sidebar"),t.classList.remove("active"),t.setAttribute("data-state","")}},{key:"handleChangeDMPanel",value:function(e){if("DMInbox"===e&&!this.hasDMMessages)return this.currentDMComponent="DMUserList";this.currentDMComponent=e}},{key:"handlePingOnline",value:function(){io.socket.get("/users/ping")}},{key:"handleUpdateGetDMs",value:function(e){e.length>0&&(this.hasDMMessages=!0,this.showDMPanel||(this.currentDMComponent="DMInbox"))}},{key:"handleUpdateUnreadMessages",value:function(e){this.hasDMMessages||(this.hasDMMessages=!0,this.showDMPanel||(this.currentDMComponent="DMInbox"))}},{key:"handleOpenCodePanel",value:function(e){this.showCodePanel=e}},{key:"handleCloseCodePanel",value:function(e){this.showCodePanel=e}},{key:"handleSetWindowDimensions",value:function(e){this.windowHeight=e.height,this.windowWidth=e.width}}]),e}();e.exports=r.default.createStore(c,"GeneralStore")},"./app/javascript/deprecated/flatchat-student/stores/LobbyStore.js":function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var r=a("../../shared/node_modules/underscore/underscore.js"),s=a("./app/javascript/deprecated/lib/alt.js"),o=(a("../../shared/node_modules/react-router/es/index.js").browserHistory,a("./app/javascript/deprecated/lib/sound-manager.js")),i=a("./app/javascript/deprecated/flatchat-student/sources/LobbySource.js"),u=a("./app/javascript/deprecated/flatchat-student/sources/UsersSource.js"),l=(a("./app/javascript/deprecated/flatchat-student/sources/DMSource.js"),a("./app/javascript/deprecated/flatchat-student/actions/LobbyActions.js")),c=a("./app/javascript/deprecated/flatchat-student/actions/UsersActions.js"),d=a("./app/javascript/deprecated/flatchat-student/actions/DMActions.js"),p=a("./app/javascript/deprecated/flatchat-student/actions/RoomsActions.js"),h=(a("./app/javascript/deprecated/flatchat-student/stores/RoomsStore.js"),function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.channelNodes=[],this.trackNodes=[],this.lobbyNodes=[],this.studyGroupNodes=[],this.DMNodes=[],this.searchDMNodes=[],this.searchDMNodeIndex=-1,this.activeNode={},this.unread_messages_total=0,this.unread_mentions_total=0,this.isModalOpen=!1,this.loadingSearchPeople=!1,this.bindListeners({handleUpdateGetTrackRooms:l.updateGetTrackRooms,handleUpdateGetStudyGroupRooms:l.updateGetStudyGroupRooms,handleUpdateGetChannelRooms:l.updateGetChannelRooms,handleMarkNodeActive:l.markNodeActive,handleUpdateGetDMs:d.updateGetDMs,handleDMOnlineNotif:d.updateOnlineNofif,handleUpdateUnreadMentions:l.updateUnreadMentions,handleUpdateUnreadMessages:d.updateUnreadMessages,handleLoadingLeaveRoom:l.loadingLeaveRoom,handleUpdateLeaveRoom:l.updateLeaveRoom,handleClearUnreadRecordsForRoom:l.clearUnreadRecordsForRoom,handleUpdateRelayUnreads:l.updateRelayUnreads,handleRecieveRelayUnreads:l.recieveRelayUnreads,handleUpdatePullUnreads:l.updatePullUnreads,handleUpdateRelayNewRoom:d.updateRelayNewRoom,handleRecieveRelayNewRoom:d.recieveRelayNewRoom,handleDing:l.ding,handleOpenDMModal:l.openDMModal,handleCloseDMModal:l.closeDMModal,handleLoadingSearchUsers:c.loadingSearchUsers,handleUpdateSearchUsers:c.updateSearchUsers,handleUpdateGetRoom:p.updateGetRoom,handleUpdateArchiveRoom:p.updateArchiveRoom,handleFailedArchiveRoom:p.failedArchiveRoom,handleSearchDMNodeIncrement:c.searchDMNodeIncrement,handleSearchDMNodeDecrement:c.searchDMNodeDecrement}),this.exportAsync(u),this.exportAsync(i),"undefined"!==typeof io&&(io.socket.on("unread_messages",function(e){d.updateUnreadMessages(e),l.ding(e)}),io.socket.on("unread_mentions",function(e){l.updateUnreadMentions(e)}))}return n(e,[{key:"handleUpdateGetStudyGroupRooms",value:function(e){this.studyGroupNodes=e}},{key:"handleDing",value:function(e){!e.admin&&e.at_mention&&o.play("new-activity")}},{key:"handleUpdatePullUnreads",value:function(e){var t=0,a=0;r.each(e,function(e){a+=e.unread_mentions_count,t+=e.unread_messages_count}),this.unread_mentions_total=a,this.unread_messages_total=t}},{key:"handleUpdateRelayUnreads",value:function(){}},{key:"handleRecieveRelayUnreads",value:function(e){this.unread_mentions_total=e.unread_mentions,this.unread_messages_total=e.unread_messages}},{key:"handleUpdateRelayNewRoom",value:function(){}},{key:"handleRecieveRelayNewRoom",value:function(e){this.DMNodes.unshift(e.room)}},{key:"handleClearUnreadRecordsForRoom",value:function(e){var t=[].concat(this.DMNodes).concat(this.lobbyNodes).concat(this.studyGroupNodes),a=r.findWhere(t,{room_id:e});a.unread_messages_count=0,a.unread_mentions_count=0,this._setUnreads(),this.getInstance().relayUnreads()}},{key:"handleUpdateGetTrackRooms",value:function(e){var t=r.findWhere(e,{track_id:String(gon.chat_data.track_id)});this.trackNodes=e.sort(function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:-1}),t&&(this.trackNodes=r.filter(this.trackNodes,function(e){return e.track_id!=String(gon.chat_data.track_id)}),this.trackNodes.unshift(t)),this.lobbyNodes=this.channelNodes.concat(this.trackNodes),this._setUnreads()}},{key:"handleUpdateGetDMs",value:function(e){this.DMNodes=e}},{key:"handleUpdateGetChannelRooms",value:function(e){this.channelNodes=e,this.lobbyNodes=this.channelNodes.concat(this.trackNodes)}},{key:"handleMarkNodeActive",value:function(e){switch(this.activeNode.active=!1,e.sectionKey){case"dms":this.activeNode=this.DMNodes[e.index];break;case"channels":this.activeNode=this.lobbyNodes[e.index];break;case"study_group":this.activeNode=this.studyGroupNodes[e.index]}this.activeNode.active=!0}},{key:"handleDMOnlineNotif",value:function(e){var t=r.find(this.DMNodes,function(t){return t.user.id==e.id});t&&(t.user.online=e.online)}},{key:"handleUpdateUnreadMentions",value:function(e){var t=r.findWhere(this.lobbyNodes,{room_id:e.room_id});t&&(this.activeNode.room_id==t.room_id?(t.unread_messages_count=0,t.unread_mentions_cont=0):(t.unread_messages_count=e.unread_messages_count,t.unread_mentions_count=e.unread_mentions_count),this._setUnreads())}},{key:"handleUpdateUnreadMessages",value:function(e){var t=[].concat(this.DMNodes).concat(this.lobbyNodes).concat(this.studyGroupNodes),a=r.findWhere(t,{room_id:e.room_id});a&&(this.activeNode.room_id==a.room_id?(a.unread_messages_count=0,a.unread_mentions_cont=0):(a.unread_messages_count=e.unread_messages_count,a.unread_mentions_count=e.unread_mentions_count),this._setUnreads())}},{key:"handleLoadingLeaveRoom",value:function(e){this.DMNodes=r.reject(this.DMNodes,function(t){return t.room_id==e})}},{key:"handleUpdateLeaveRoom",value:function(e){}},{key:"_setUnreads",value:function(){var e=this;this.unread_messages_total=0,this.unread_mentions_total=0,r.each(this.lobbyNodes,function(t){e.unread_messages_total+=t.unread_messages_count,e.unread_mentions_total+=t.unread_mentions_count}),this.getInstance().relayUnreads()}},{key:"handleOpenDMModal",value:function(){this.isModalOpen=!0}},{key:"handleCloseDMModal",value:function(){this.isModalOpen=!1}},{key:"handleLoadingSearchUsers",value:function(){this.loadingSearchPeople=!0}},{key:"handleUpdateSearchUsers",value:function(e){this.loadingSearchPeople=!1,this.searchDMNodes=e}},{key:"handleUpdateGetRoom",value:function(e){if(e.policy.user_ids&&("dm_modal"==e.entry_point||"hovercard"==e.entry_point)){var t=null;r.each(e.members,function(e){e.user.id==gon.current_user_id||(t=e.user)}),t||console.log("hmm, no other user");var a={id:e.id,room_id:e.id,user:t,name:t.full_name,policy:e.policy,unread_messages_count:0,unread_mentions_count:0,last_message:{}},n=r.findWhere(this.DMNodes,{room_id:e.id});n||(this.DMNodes.unshift(a),n=this.DMNodes[0]),n.unread_messages_count=0,n.unread_mentions_count=0,this.activeNode.active=!1,this.activeNode=n,this.activeNode.active=!0,this.handleCloseDMModal()}}},{key:"handleSearchDMNodeIncrement",value:function(){if(this.searchDMNodeIndex<this.searchDMNodes.length-1&&this.searchDMNodeIndex++,this.searchDMNodeIndex>2){var e=66*(this.searchDMNodeIndex-2);document.getElementById("search-users-list").scrollTop=e}console.log("this.searchDMNodeIndex",this.searchDMNodeIndex)}},{key:"handleSearchDMNodeDecrement",value:function(){if(-1!==this.searchDMNodeIndex){if(this.searchDMNodeIndex--,this.searchDMNodeIndex<3)document.getElementById("search-users-list").scrollTop=0;else{var e=66*(this.searchDMNodeIndex-2);document.getElementById("search-users-list").scrollTop=e}console.log("this.searchDMNodeIndex",this.searchDMNodeIndex)}}},{key:"handleUpdateArchiveRoom",value:function(e){this.studyGroupNodes=r.reject(this.studyGroupNodes,function(t){return t.id===parseInt(e.id)})}},{key:"handleFailedArchiveRoom",value:function(e){}}]),e}());e.exports=s.createStore(h,"LobbyStore")},"./app/javascript/deprecated/flatchat-student/stores/RoomsStore.js":function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=h(a("../../shared/node_modules/underscore/underscore.js")),s=h(a("./app/javascript/deprecated/lib/alt.js")),o=(h(a("./app/javascript/deprecated/lib/server-time.js")),h(a("./app/javascript/deprecated/flatchat-student/actions/GeneralActions.js")),h(a("./app/javascript/deprecated/flatchat-student/actions/MessagesActions.js"))),i=h(a("./app/javascript/deprecated/flatchat-student/actions/RoomsActions.js")),u=h(a("./app/javascript/deprecated/flatchat-student/actions/DMActions.js")),l=h(a("./app/javascript/deprecated/flatchat-student/actions/LobbyActions.js")),c=h(a("./app/javascript/deprecated/flatchat-student/sources/RoomsSource.js")),d=h(a("./app/javascript/deprecated/flatchat-student/sources/MessagesSource.js")),p=h(a("./app/javascript/deprecated/flatchat-student/stores/GeneralStore.js"));function h(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.activeRoom={},this.hasActivity=!1,this.isLoading=!0,this.animationState="uninitiated",this.blockActions=!1,this.drafts={},this.bindListeners({handleGetRoom:i.default.getRoom,handleLoadingGetRoom:i.default.loadingGetRoom,handleUpdateGetRoom:i.default.updateGetRoom,handleFailedGetRoom:i.default.failedGetRoom,handleLoadingGetMoreMessages:i.default.loadingGetMoreMessages,handleUpdateGetMoreMessages:i.default.updateGetMoreMessages,handleAnimateMessagesIn:i.default.animateMessagesIn,handleAnimateMessagesOut:i.default.animateMessagesOut,handleAnimateMessagesHalfOut:i.default.animateMessagesHalfOut,handleAddMessage:o.default.addMessage,handleLoadingAddMessage:o.default.loadingAddMessage,handleUpdateAddMessage:o.default.updateAddMessage,handleReceiveAddMessage:o.default.receiveAddMessage,handleFailedAddMessage:o.default.failedAddMessage,handleAddFile:o.default.addFile,handleLoadingAddFile:o.default.loadingAddFile,handleUpdateAddFile:o.default.updateAddFile,handleFailedAddFile:o.default.failedAddFile,handleSendLastMessageRead:o.default.sendLastMessageRead,handleUpdateLastMessageRead:o.default.updateLastMesssageRead,handleErrorLastMessageRead:o.default.errorLastMessageRead,handleCacheDraft:i.default.cacheDraft}),this.exportAsync(c.default),this.exportAsync(d.default);"undefined"!==typeof io&&io.socket.on("msg",function(e){e.admin||(e.room_id===t.activeRoom.id&&o.default.receiveAddMessage(e),e.activeRoomId=t.activeRoom.id,2==e.visibility?u.default.ding(e):l.default.ding(e))})}return n(e,[{key:"handleGetRoom",value:function(){this.startLoad=new Date}},{key:"handleAnimateMessagesIn",value:function(){this.animationState="in"}},{key:"handleAnimateMessagesOut",value:function(){this.animationState="out"}},{key:"handleAnimateMessagesHalfOut",value:function(){this.animationState="half-out"}},{key:"handleLoadingGetRoom",value:function(){this.isLoading=!0,this.activeRoom={}}},{key:"handleUpdateGetRoom",value:function(e){switch(e.id&&e.id===this.activeRoom.id&&(e.isLoaded=!0),this.endLoad=new Date,this.loadTime=this.endLoad.getTime()-this.startLoad.getTime(),p.default.state.appState){case"DM":this._setupRoomDMStrategy(e);break;case"LOBBY":default:this._setupRoomLobbyStrategy(e)}this.endLoad=new Date,this.loadTime=this.endLoad.getTime()-this.startLoad.getTime(),console.log("Room load time:Room-id-",e.id,"- time",this.loadTime,"ms"),r.default.delay(i.default.animateMessagesIn,1)}},{key:"_setupRoomDMStrategy",value:function(e){e.members.length>0&&!e.isLoaded&&(this.isLoading=!1,e.messages&&e.messages.length>100&&(e.messages=e.messages.splice(-100,100)),this._separateRoomMembers(e),this._insertLastSeen(e),this.activeRoom=e,this.activeRoom.messageOffset=0,this.activeRoom.currentPage=0,e.messages&&e.messages.length<100&&(this.activeRoom.paginationBlock=!0),this._scrollRoom(!0),this.getInstance().sendLastMessageRead({}),document.getElementById("js--dm-txt-input").value="",p.default.state.setOpenDMPanelStyles())}},{key:"_setupRoomLobbyStrategy",value:function(e){if(!e.isLoaded){this.isLoading=!1,e.messages&&e.messages.length>100&&(e.messages=e.messages.splice(-100,100)),this._seperateRoomMembers(e),this._insertLastSeen(e),this.activeRoom=e,this.activeRoom.messageOffset=0,this.activeRoom.currentPage=0,e.messages&&e.messages.length<100&&(this.activeRoom.paginationBlock=!0),this._scrollRoom(!0),this.getInstance().sendLastMessageRead({});var t=document.getElementById("js--admin-txt-input");t.value="",t.focus()}}},{key:"handleCacheDraft",value:function(e){this.drafts[this.activeRoom.id]=e}},{key:"_separateRoomMembers",value:function(e){e.viewingUser=r.default.find(e.members,function(e){return e.user.id===gon.current_user_id}),e.viewingUser||(e.viewingUser={user_id:gon.current_user_id,unread_messages_count:0}),e.otherUsers=r.default.filter(e.members,function(e){return e.user.id!==gon.current_user_id})}},{key:"_insertLastSeen",value:function(e){if(e.viewingUser&&e.messages){var t=e.viewingUser.unread_messages_count;if(t){var a={id:"99-"+Date.now(),type:"new-messages-slug"};e.messages.splice(-1*t,0,a)}}}},{key:"_scrollRoom",value:function(e){var t=function(e){var t=document.getElementById("fc--message-list"),a=t.clientHeight,n=t.scrollHeight,r=t.scrollTop;if(e||(a+r)/n>.9){var s=n;t.scrollTop=s}},a=setInterval(function(){var n=document.getElementsByClassName("img-message"),s=0;0===n.length&&(t(e),clearInterval(a)),r.default.each(n,function(r){r.complete&&++s===n.length&&(t(e),clearInterval(a))})},50)}},{key:"handleFailedGetRoom",value:function(e){console.log("handling failed room...",e)}},{key:"handleUpdateGetMoreMessages",value:function(e){e.messages&&e.messages.length>0?(this.activeRoom.currentPage++,this.activeRoom.messages=e.messages.concat(this.activeRoom.messages),document.getElementById("fc--message-list").scrollTop=44*e.messages.length,e.messages.length<100&&(this.activeRoom.paginationBlock=!0)):this.activeRoom.paginationBlock=!0;r.default.delay(i.default.animateMessagesIn,1),this.blockActions=!1}},{key:"handleLoadingGetMoreMessages",value:function(){this.blockActions=!0}},{key:"handleAddMessage",value:function(){}},{key:"handleLoadingAddMessage",value:function(e){if(e&&"text"===e.type){var t=Date.now(),a=gon.current_user,n=a.first_name,r=a.last_name,s=a.github_username,o=a.avatar_url,i=a.learn_uuid,u=a.has_learn_badge,l=a.id;e.id=t+"-tmp-message",e.ago_date="Just Now",e.timestamp=new Date(t).toISOString(),e.user_id=l,e.avatar_url=o,e.first_name=n,e.last_name=r,e.learn_uuid=i,e.has_learn_badge=u,e.github_username=s,e.username=s,e.user_full_name=gon.current_user.full_name,this.activitycountDown=0,this.hasActivity=!1,this.activeRoom.messages||(this.activeRoom.messages=[]),this.activeRoom.messages.push(e),this._scrollRoom(!1),this._removeLastSeen(),this.drafts[this.activeRoom.id]=""}}},{key:"handleUpdateAddMessage",value:function(e){}},{key:"handleReceiveAddMessage",value:function(e){if(this.activeRoom.messages||(this.activeRoom.messages=[]),this.activeRoom.messageOffset++,gon.current_user_id===e.user_id)this._removeLastSeen(),"text"!==e.type&&(this.activeRoom.messages.push(e),this._scrollRoom(!1));else{this.activeRoom.messages.push(e),this._scrollRoom(!1);var t=p.default.state,a=t.showDMPanel&&"DMRoom"===t.currentDMComponent,n=e.room_id===this.activeRoom.id;a&&n&&this.getInstance().sendLastMessageRead({isLooking:!0})}}},{key:"handleFailedAddMessage",value:function(e){console.log("handling add message: failed",e)}},{key:"handleAddFile",value:function(e){msgData.id=(new Date).getTime(),this.activeRoom.messages.push(msgData)}},{key:"handleLoadingAddFile",value:function(){}},{key:"handleUpdateAddFile",value:function(e){}},{key:"handleFailedAddFile",value:function(e){console.log("handling add file: failed ",e)}},{key:"handleSendLastMessageRead",value:function(){}},{key:"handleUpdateLastMessageRead",value:function(e){}},{key:"_removeLastSeen",value:function(){this.activeRoom.lastSeenIndex<0||(this.activeRoom.lastSeenIndex=-1,this.activeRoom.messages&&(this.activeRoom.messages=r.default.filter(this.activeRoom.messages,function(e){return"new-messages-slug"!=e.type})))}},{key:"handleErrorLastMessageRead",value:function(e){console.log("handleErrorLastMessageRead:",e)}}]),e}();e.exports=s.default.createStore(f,"RoomsStore")},"./app/javascript/deprecated/flatchat-student/stores/UsersStore.js":function(e,t,a){"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=d(a("../../shared/node_modules/underscore/underscore.js")),s=d(a("./app/javascript/deprecated/lib/alt.js")),o=d(a("../../shared/node_modules/fuse.js/src/fuse.js")),i=d(a("./app/javascript/deprecated/flatchat-student/actions/GeneralActions.js")),u=d(a("./app/javascript/deprecated/flatchat-student/actions/UsersActions.js")),l=d(a("./app/javascript/deprecated/flatchat-student/actions/DMActions.js")),c=d(a("./app/javascript/deprecated/flatchat-student/sources/UsersSource.js"));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),gon.chat_data||(gon.chat_data={}),this.currentTrackID=gon.chat_data.track_id,this.currentBatchID=gon.chat_data.batch_id,this.currentUserID=gon.current_user.id,this.DMUsersPage=0,this.DMUsers=[],this.filteredDMUsers=[],this.currentSearch="",this.loadingSearchUsers=!1,this.highlightedUserIndex=0,this.bindListeners({handleGetDMUsers:u.default.getDMUsers,handleLoadingGetDMUsers:u.default.loadingGetDMUsers,handleUpdateGetDMUsers:u.default.updateGetDMUsers,handleFailedGetDMUsers:u.default.failedGetDMUsers,handleGetNextDMUsersPage:u.default.getNextDMUsersPage,handleLoadingGetNextDMUsersPage:u.default.loadingGetNextDMUsersPage,handleUpdateGetNextDMUsersPage:u.default.updateGetNextDMUsersPage,handleFailedGetNextDMUsersPage:u.default.failedGetNextDMUsersPage,handleSearchUsers:u.default.searchUsers,handleLoadingSearchUsers:u.default.loadingSearchUsers,handleUpdateSearchUsers:u.default.updateSearchUsers,handleFailedSearchUsers:u.default.failedSearchUsers,handleUpdateOnline:u.default.updateOnline,handleIncrementHighlightIndex:u.default.incrementHighlightIndex,handleDecrementHighlightIndex:u.default.decrementHighlightIndex,handleUpdateHighlightIndex:u.default.updateHighlightIndex,handleChangeDMPanel:i.default.changeDMPanel}),this.exportAsync(c.default),"undefined"!==typeof io&&(io.socket.on("user_online",function(e){e.user.online=!0,u.default.updateOnline(e.user),l.default.updateOnlineNofif(e.user)}),io.socket.on("user_offline",function(e){e.user.online=!1,u.default.updateOnline(e.user),l.default.updateOnlineNofif(e.user)}))}return n(e,[{key:"handleGetDMUsers",value:function(){}},{key:"handleLoadingGetDMUsers",value:function(){}},{key:"handleUpdateGetDMUsers",value:function(e){var t=r.default.last(e);t&&(t.lastLoaded=!0,this.lastLoaded=t),this.DMUsers=e,this.sortAndFilterDMUsers()}},{key:"handleFailedGetDMUsers",value:function(){}},{key:"handleGetNextDMUsersPage",value:function(){}},{key:"handleLoadingGetNextDMUsersPage",value:function(){}},{key:"handleUpdateGetNextDMUsersPage",value:function(e){this.DMUsersPage+=1;var t=r.default.last(e);t&&(t.lastLoaded=!0,this.lastLoaded&&delete this.lastLoaded.lastLoaded,this.lastLoaded=t),this.DMUsers=r.default.uniq(this.DMUsers.concat(e),function(e){return e.id}),this.sortAndFilterDMUsers()}},{key:"handleFailedGetNextDMUsersPage",value:function(){}},{key:"handleSearchUsers",value:function(e){}},{key:"handleLoadingSearchUsers",value:function(e){this.currentSearch!==e&&(this.highlightedUserIndex=0),this.currentSearch=e,this.loadingSearchUsers=!0}},{key:"handleUpdateSearchUsers",value:function(e){this.loadingSearchUsers=!1,this.DMUsers=r.default.uniq(this.DMUsers.concat(e),function(e){return e.id}),this.sortAndFilterDMUsers()}},{key:"handleFailedSearchUsers",value:function(){this.loadingSearchUsers=!1}},{key:"handleUpdateOnline",value:function(e){if(this.shouldUpdateOnlineStatus(e)){var t=r.default.find(this.DMUsers,function(t){return t.id==e.id});t&&(t.online=e.online),this.sortAndFilterDMUsers()}}},{key:"shouldUpdateOnlineStatus",value:function(e){return e.id!==this.currentUserID}},{key:"sortAndFilterDMUsers",value:function(){var e=r.default.groupBy(this.DMUsers,"online"),t=e.true,a=e.false;t=r.default.sortBy(t,function(e){return e.first_name.toLowerCase()}),a=r.default.sortBy(a,function(e){return e.first_name.toLowerCase()}),this.DMUsers=t.concat(a),this.currentSearch.length?this.filteredDMUsers=new o.default(this.DMUsers,{keys:["first_name","last_name","github_username"],threshold:.1}).search(this.currentSearch):this.filteredDMUsers=this.DMUsers}},{key:"handleIncrementHighlightIndex",value:function(){this.highlightedUserIndex<this.DMUsers.length-1&&(this.highlightedUserIndex+=1)}},{key:"handleDecrementHighlightIndex",value:function(){this.highlightedUserIndex>0&&(this.highlightedUserIndex-=1)}},{key:"handleUpdateHighlightIndex",value:function(e){this.highlightedUserIndex=e}},{key:"handleChangeDMPanel",value:function(e){"DMUserList"===e&&(this.highlightedUserIndex=0)}}]),e}();e.exports=s.default.createStore(p,"UsersStore")},"./app/javascript/deprecated/lib/chat-textcomplete.js":function(e,t,a){"use strict";a("./app/javascript/deprecated/lib/textcomplete.js");var n=a("../../shared/node_modules/jquery/dist/jquery.js"),r=a("../../shared/node_modules/underscore/underscore.js"),s=a("./app/javascript/deprecated/lib/routes.js"),o=a("./app/javascript/deprecated/lib/current-user.js"),i=a("./app/javascript/deprecated/lib/emojify.js");e.exports=function(e,t){t||(t={}),r.defaults(t,{getBatchID:function(){return o.get("active_batch_id")},maxCount:5});var a=t.component||t.view||{};e.textcomplete(function(e){return e||(e={}),[{match:/(^|\s):([\-+\w]*)$/,search:function(e,t){t(r.filter(i.emojiNames,function(t){return 0===t.indexOf(e)}))},replace:function(e,t){return" :"+e+": "},template:function(e){return'<span class="emoji-autocomplete-preview">'+i.replace(":"+e+":")+'</span><span class="emoji-autocomplete-value heading heading--level-5 util--font-style-2">'+e+"</span>"}},{match:/(^|\s)@([\-+\w]*)$/,search:function(t,a){if(0===t.length)return a([]);e.getBatchID(),n.getJSON(s.apiUserSuggestionsPathUnrestricted(t),{count:5}).done(function(e){a(e.users)}).fail(function(e){a([])})},cache:!0,replace:function(e,t){return" @"+e.github_username+" "},template:function(e){var t='<div class="media-block media-block--vertical-align-middle status-alert" data-status="'+(e.online?"online":"offline")+'">';return t+='<div class="media-block__media util--padding-lm">',t+='<div class="image-frame image-frame--has-badge image-frame--border-radius-small image-frame--fixed-size-medium">',t+='<img class="image-frame__image" src="'+e.avatar_url+'"></div></div>',t+='<div className="media-block__content media-block__content--fill util--padding-rm dm-txt-node-content">',t+='<div class="status-alert__dot util--margin-rm util--display-inline-block"></div>',t+='<span class="heading heading--level-5 util--font-style-2">'+e.full_name+"<span> ",t+=' <span class="heading heading--color-grey-light heading--level-5">@'+e.github_username+"</span></div> ",t+="</div>"}}]}(t),{maxCount:t.maxCount}).on({"textComplete:show":function(){setTimeout(function(){a.textCompleteActive=!0,a.afterActiveEnter=!1},100)},"textComplete:hide":function(){setTimeout(function(){a.textCompleteActive=!1,a.afterActiveEnter=!1},1)}})}},"./app/javascript/deprecated/lib/current-user.js":function(e,t,a){"use strict";var n,r=a("./app/javascript/deprecated/models/user.js"),s=(n=r)&&n.__esModule?n:{default:n};e.exports=gon&&gon.current_user?new s.default(gon.current_user):new s.default},"./app/javascript/deprecated/lib/emojify.js":function(e,t,a){"use strict";var n=a("../../shared/node_modules/emojify.js/dist/js/emojify.js");n.setConfig({img_dir:"/assets/emojis"}),e.exports=n},"./app/javascript/deprecated/lib/routes.js":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.userSearchPath=t.userRoleForUserPath=t.userPath=t.userAssessmentsPath=t.userAdminPath=t.trackExplorerPath=t.switchUserTrackPath=t.styleGuidePath=t.studyGroupsPath=t.studyGroupSlugPath=t.studyGroupPath=t.studyGroupAttendPath=t.startOnboardingPath=t.rootPath=t.rolloutsPath=t.rolesAndPermissionsPath=t.resetProgressPath=t.registerCustomDomainPath=t.refreshGithubTokenPath=t.publicLessonRegisterPath=t.organizationsPath=t.organizationPath=t.organizationAdminsPath=t.onboardingDocumentsPath=t.omniAuthorizePath=t.newStudentApplicationPath=t.magazinePath=t.lessonDownloadPath=t.lessonsPath=t.jsaReportingPath=t.ilePath=t.ileDownloadPath=t.graduationAdminDashboardPath=t.globalSearchPath=t.getOnboardingPath=t.friendsPath=t.expertChatPath=t.enrollmentsLandingPath=t.educationManagementPath=t.destroyUserSessionPath=t.curriculumShowTrackPath=t.curriculumShowTrackHealthPath=t.curriculumShowTrackDeploymentsPath=t.curriculumShowLessonStatsPath=t.curriculumShowLessonPath=t.curriculumShowLessonContentPath=t.curriculumSearchPath=t.curriculumDeployerPath=t.curriculumCreateLessonPath=t.curriculumAppPath=t.cpbUpgradePath=t.cpbApplicationsPath=t.coursesPath=void 0,t.careerServicesAppPath=t.blogPostsPath=t.blogPostSubmitPath=t.blogPostSavePath=t.blogPostPublishPath=t.blogPath=t.blogLinkPath=t.blogEditPath=t.blogBlogPostPath=t.billingPath=t.batchesPath=t.batchMainSlackChannelPath=t.batchSettingsPath=t.batchProjectReviewsPath=t.batchProgressPath=t.batchPath=t.batchManagementRostersPath=t.batchLessonPath=t.batchAdminsPath=t.assignmentsAppPath=t.assessmentUserDashboardPath=t.assessmentPath=t.assessmentDashboardPath=t.apiUsersProgressPath=t.apiUsersPath=t.apiUsersConfirmAccountPath=t.apiUserTracksPath=t.apiUserTracksForSwitcherPath=t.apiUserSwitchTrackPath=t.apiUserSwitchBatchPath=t.apiUserSuggestionsPathUnrestricted=t.apiUserSearchPath=t.apiUserRolesRootPath=t.apiUserRoleForUserPath=t.apiUserPath=t.apiUserMostRelevantAssignedRepoPath=t.apiUserAuthIntegrationsShowPath=t.apiUpdateReadme=t.apiTracksPath=t.apiTrackActiveBatchesPath=t.apiTeamsPath=t.apiStudyGroupsPath=t.apiStudyGroupResolvePath=t.apiStudyGroupMessagesPath=t.apiStudyGroupActivityFeedPath=t.apiStudentProfileTimeline=t.apiStudentAddableBatchesPath=t.apiSocialSharePath=t.apiSelfReviewPath=t.apiSchedulePath=t.apiRolesPath=t.apiPostSocialSharePath=t.apiPath=t.apiOrganizationsPath=t.apiOrganizationsLitePath=t.apiOrganizationAdminsPath=t.apiMapSubmissionsPath=t.apiMapMessagesPath=t.apiLiveReviewsPath=t.apiLiveReviewUnscheduledPath=t.apiLiveReviewScheduledPath=t.apiLiveReviewProjectsPath=t.apiLiveReviewPendingFeedbackPath=t.apiLiveReviewPath=t.apiLiveReviewCompletePath=t.apiLiveReviewAttemptsPath=t.apiLiveReviewAttemptPath=t.apiLiveReviewAttemptInstructorsPath=t.apiLiveReviewAssessmentsPath=t.apiLessonStudyGroupsPath=t.apiInvitationsPath=t.apiGraduationSignOffPath=t.apiGraduationPath=t.apiGlobalSearchPath=t.apiDeploymentsPath=t.apiCurriculumTemplatesPath=t.apiCurriculumSearchPath=t.apiCurriculumPath=t.apiCreateStudentFeedbackPath=t.apiConnectedGithubPath=t.apiCloneTopic=t.apiBatchManagementStudentSearchPath=t.apiBatchManagementRostersPath=t.apiBatchManagementRosterDownloadsPath=t.apiBatchesPath=t.apiBatchesLitePath=t.apiBatchesForUserPath=t.apiBatchUserRolesPath=t.apiBatchTracksPath=t.apiBatchTracksForUserPath=t.apiBatchTrackProgressPath=t.apiBatchTrackPath=t.apiBatchTrackDeployedPath=t.apiBatchStudentsPath=t.apiBatchProjectReviewsPath=t.apiBatchLessonPath=t.apiAnnouncementPath=t.apiActivityFeedPath=t.apiActivateBatchTrackPath=t.accountManagementPath=void 0;var n=a("./app/javascript/lib/utils/path-helper.js"),r=t.accountManagementPath=function(){return(0,n.pathHelper)("/account")},s=t.apiActivateBatchTrackPath=function(e,t){return J("/batches/"+e+"/batch_tracks/"+t+"/activate")},o=t.apiActivityFeedPath=function(e){return J("/activity_feeds/"+e)},i=t.apiAnnouncementPath=function(){return J("/announcements")},u=t.apiBatchLessonPath=function(e,t){return J("/batches/"+e+"/lessons/"+t)},l=t.apiBatchProjectReviewsPath=function(e){return J("/batches/"+e+"/project_reviews")},c=t.apiBatchStudentsPath=function(e){return J("/batches/"+e+"/batch_students")},d=t.apiBatchTrackDeployedPath=function(e,t){return J("/batches/"+e+"/tracks/"+t+"/deployed")},p=t.apiBatchTrackPath=function(e,t){return J("/batches/"+e+"/batch_tracks/"+t)},h=t.apiBatchTrackProgressPath=function(e,t){return J("/batches/"+e+"/tracks/"+t+"/progress")},f=t.apiBatchTracksForUserPath=function(e){return J("/users/"+e+"/batch_tracks")},m=t.apiBatchTracksPath=function(e){return J("/batches/"+e+"/batch_tracks")},g=t.apiBatchUserRolesPath=function(t,a){var n=J("/batches/"+t+"/user_roles");a&&(n=n+"?"+e.param(a));return n},v=t.apiBatchesForUserPath=function(e){return J("/users/"+e+"/batches")},y=t.apiBatchesLitePath=function(){return J("/batches/lite")},_=t.apiBatchesPath=function(){return J("/batches")},b=t.apiBatchManagementRosterDownloadsPath=function(e){return J("/batch-management/roster-downloads/"+e+".csv")},P=(t.apiBatchManagementRostersPath=function(){return J("/batch-management/rosters")},t.apiBatchManagementStudentSearchPath=function(e){return J("/batch-management/students/search?q=")+e}),k=t.apiCloneTopic=function(e){return J("/curriculums/clone")},M=t.apiConnectedGithubPath=function(e){return J("/account_management/connected_github/"+e)},j=t.apiCreateStudentFeedbackPath=function(){return J("/student_feedbacks")},D=t.apiCurriculumPath=function(){return J("/curriculums")},R=t.apiCurriculumSearchPath=function(e){return J("/curriculums/search/"+e)},w=t.apiCurriculumTemplatesPath=function(){return D()+"/templates"},U=t.apiDeploymentsPath=function(){return J("/deployments")},S=t.apiGlobalSearchPath=function(e){return J("/search/"+e)},x=t.apiGraduationPath=function(){return J("/graduation")},N=t.apiGraduationSignOffPath=function(e){return J("/graduation/"+e+"/sign_off")},A=t.apiInvitationsPath=function(e,t){return J("/"+e+"/"+t+"/invitations")},E=t.apiLessonStudyGroupsPath=function(e){return J("/lessons/"+e+"/study_groups")},O=t.apiLiveReviewAssessmentsPath=function(){return q()+"assessments"},C=t.apiLiveReviewAttemptInstructorsPath=function(){return J("/attempts/instructors")},G=t.apiLiveReviewAttemptPath=function(e,t){return L(e)+t},L=t.apiLiveReviewAttemptsPath=function(e){return I(e)+"/attempts/"},T=t.apiLiveReviewCompletePath=function(){return q()+"complete"},I=t.apiLiveReviewPath=function(e){return q()+e},H=t.apiLiveReviewPendingFeedbackPath=function(){return q()+"pending_feedback"},B=t.apiLiveReviewProjectsPath=function(){return q()+"live_review_projects"},F=t.apiLiveReviewScheduledPath=function(){return q()+"scheduled"},z=t.apiLiveReviewUnscheduledPath=function(){return q()+"unscheduled"},q=t.apiLiveReviewsPath=function(){return J("/live_reviews/")},W=t.apiMapMessagesPath=function(){return J("/map/messages")},V=t.apiMapSubmissionsPath=function(){return J("/map/submissions")},$=t.apiOrganizationAdminsPath=function(e){return J("/organizations/"+e+"/admins")},Q=t.apiOrganizationsLitePath=function(){return J("/organizations/lite")},K=t.apiOrganizationsPath=function(){return J("/organizations")},J=t.apiPath=function(e){return(0,n.pathHelper)("/api/v1"+e)},Y=t.apiPostSocialSharePath=function(e){return J("/shares/"+e+"/post")},Z=t.apiRolesPath=function(){return J("/roles")},X=t.apiSchedulePath=function(){return J("/schedules")},ee=t.apiSelfReviewPath=function(e){return J("/reviews/"+e)},te=t.apiSocialSharePath=function(){return J("/share")},ae=t.apiStudentAddableBatchesPath=function(e){return J("/users/"+e+"/addable_batches")},ne=t.apiStudentProfileTimeline=function(){return J("/student_profile/timeline")},re=t.apiStudyGroupActivityFeedPath=function(e){return J("/study_groups/"+e+"/activity_feeds")},se=t.apiStudyGroupMessagesPath=function(e){return J("/study_groups/"+e+"/messages")},oe=t.apiStudyGroupResolvePath=function(){return J("/study_groups/resolve")},ie=t.apiStudyGroupsPath=function(){return J("/study_groups")},ue=t.apiTeamsPath=function(){return J("/teams")},le=t.apiTrackActiveBatchesPath=function(e){return J("/tracks/"+e+"/active_batches")},ce=t.apiTracksPath=function(){return J("/tracks")},de=t.apiUpdateReadme=function(e){return J("/curriculums/"+e+"/readme")},pe=t.apiUserAuthIntegrationsShowPath=function(e){return J("/users/oauth_integrations/"+e)},he=t.apiUserMostRelevantAssignedRepoPath=function(e){return J("/users/"+e+"/most_relevant_assigned_repo")},fe=t.apiUserPath=function(e){return J("/users/"+e)},me=t.apiUserRoleForUserPath=function(e,t,a){return J(qt(e,t,a))},ge=t.apiUserRolesRootPath=function(e){return J("/user_roles/")},ve=t.apiUserSearchPath=function(e,t,a){var n=J("/users/search");return e&&(n=n+"?q="+e),t&&(n=n+"&exclude_id="+t+"&exclude_type="+a),n},ye=t.apiUserSuggestionsPathUnrestricted=function(e){return(0,n.pathHelper)("/api/v1/users/suggestions/"+e)},_e=t.apiUserSwitchBatchPath=function(e){return J("/users/"+e+"/switch_active_batch")},be=t.apiUserSwitchTrackPath=function(e){return J("/users/"+e+"/switch_active_track")},Pe=t.apiUserTracksForSwitcherPath=function(e){return J("/users/"+e+"/track-switcher")},ke=t.apiUserTracksPath=function(e){return J("/users/"+e+"/tracks")},Me=t.apiUsersConfirmAccountPath=function(e){return fe(e)+"/confirm_account"},je=t.apiUsersPath=function(){return J("/users")},De=t.apiUsersProgressPath=function(e){return J("/users/"+e+"/progress")},Re=t.assessmentDashboardPath=function(){return(0,n.pathHelper)("/assessments")},we=t.assessmentPath=function(e){return Re()+"/"+e},Ue=t.assessmentUserDashboardPath=function(e){return Re()+"/student-dashboard/"+e},Se=t.assignmentsAppPath=function(){return(0,n.pathHelper)("/admin/assignments")},xe=t.batchAdminsPath=function(e){return(0,n.pathHelper)("/batches/"+e+"/admins")},Ne=t.batchLessonPath=function(e,t){return(0,n.pathHelper)("/batches/"+e+"/lessons/"+t)},Ae=t.batchManagementRostersPath=function(){return(0,n.pathHelper)("/student-rosters")},Ee=t.batchPath=function(e){return(0,n.pathHelper)("/batches/"+e)},Oe=t.batchProgressPath=function(e){return(0,n.pathHelper)("/batches/"+e+"/progress")},Ce=t.batchProjectReviewsPath=function(e){return(0,n.pathHelper)("/batches/"+e+"/project_reviews")},Ge=t.batchSettingsPath=function(e){return(0,n.pathHelper)("/batches/"+e+"/settings")},Le=(t.batchMainSlackChannelPath=function(e){return(0,n.pathHelper)("/batches/"+e+"/main_slack_channel")},t.batchesPath=function(){return(0,n.pathHelper)("/batches")}),Te=t.billingPath=function(){return(0,n.pathHelper)("/billing")},Ie=t.blogBlogPostPath=function(e){return(0,n.pathHelper)("/blog/blog_posts/"+e)},He=t.blogEditPath=function(){return(0,n.pathHelper)("/blog/edit")},Be=t.blogLinkPath=function(e){return"http://"+e},Fe=t.blogPath=function(){return(0,n.pathHelper)("/blog")},ze=t.blogPostPublishPath=function(e){return(0,n.pathHelper)("/blog/blog_posts/"+e+"/publish")},qe=t.blogPostSavePath=function(e){return(0,n.pathHelper)("/blog/blog_posts/"+e+"/save")},We=t.blogPostSubmitPath=function(e){return(0,n.pathHelper)("/blog/blog_posts/"+e+"/submit")},Ve=t.blogPostsPath=function(){return(0,n.pathHelper)("/magazine/blog-posts")},$e=t.careerServicesAppPath=function(){return(0,n.pathHelper)("/career-services")},Qe=t.coursesPath=function(){return(0,n.pathHelper)("/courses")},Ke=t.cpbApplicationsPath=function(){return(0,n.pathHelper)("/enrollment_management/cpb_applications")},Je=t.cpbUpgradePath=function(){return(0,n.pathHelper)("/cpb/upgrade")},Ye=t.curriculumAppPath=function(){return(0,n.pathHelper)("/curriculum")},Ze=t.curriculumCreateLessonPath=function(e){return ot(e)+"/lessons/new"},Xe=t.curriculumDeployerPath=function(){return(0,n.pathHelper)("/admin/deploys/new")},et=t.curriculumSearchPath=function(e){return(0,n.pathHelper)("/curriculum/search/"+e)},tt=t.curriculumShowLessonContentPath=function(e,t){return at(e,t)+"/content"},at=t.curriculumShowLessonPath=function(e,t){return ot(e)+"/lessons/"+t},nt=t.curriculumShowLessonStatsPath=function(e,t){return at(e,t)+"/stats"},rt=t.curriculumShowTrackDeploymentsPath=function(e){return ot(e)+"/deployments"},st=t.curriculumShowTrackHealthPath=function(e){return ot(e)+"/health"},ot=t.curriculumShowTrackPath=function(e){return(0,n.pathHelper)("/curriculum/tracks/"+e)},it=t.destroyUserSessionPath=function(){return(0,n.pathHelper)("/sign_out")},ut=t.educationManagementPath=function(){return(0,n.pathHelper)("/education-management")},lt=t.enrollmentsLandingPath=function(){return(0,n.pathHelper)("/enrollments/welcome")},ct=t.expertChatPath=function(){return(0,n.pathHelper)("/expert-chat")},dt=t.friendsPath=function(){return(0,n.pathHelper)("/friends")},pt=t.getOnboardingPath=function(e){return J("/courses/"+e+"/onboarding_path")},ht=t.globalSearchPath=function(e){return(0,n.pathHelper)("/search/"+e)},ft=t.graduationAdminDashboardPath=function(e){return(0,n.pathHelper)("/graduation/student-dashboard/"+e)},mt=t.ileDownloadPath=function(){return(0,n.pathHelper)("/ide/download")},gt=t.ilePath=function(){return(0,n.pathHelper)("/ide")},vt=t.jsaReportingPath=function(){return Se()+"/reports/job-search-activity/all-students"},yt=t.lessonsPath=function(e){return(0,n.pathHelper)("/lessons/"+e)},_t=(t.lessonDownloadPath=function(e,t){return(0,n.pathHelper)("/batches/"+e+"/lessons/"+t+"/download")},t.magazinePath=function(){return(0,n.pathHelper)("/magazine")}),bt=t.newStudentApplicationPath=function(){return(0,n.pathHelper)("/apply/new")},Pt=t.omniAuthorizePath=function(e){return"/users/auth/"+e},kt=t.onboardingDocumentsPath=function(){return(0,n.pathHelper)("/onboarding-documents")},Mt=t.organizationAdminsPath=function(e){return(0,n.pathHelper)("/organizations/"+e+"/admins")},jt=t.organizationPath=function(e){return(0,n.pathHelper)("/organizations/"+e)},Dt=t.organizationsPath=function(){return(0,n.pathHelper)("/organizations")},Rt=t.publicLessonRegisterPath=function(){return J("/lessons/register")},wt=t.refreshGithubTokenPath=function(){return(0,n.pathHelper)("/token_refresh")},Ut=t.registerCustomDomainPath=function(){return J("/blog/register_domain")},St=t.resetProgressPath=function(e,t,a){return(0,n.pathHelper)("/admin/reset_progress/users/"+e+"/canonical_progresses/"+t+"/lessons/"+a)},xt=t.rolesAndPermissionsPath=function(){return(0,n.pathHelper)("/roles-and-permissions")},Nt=t.rolloutsPath=function(){return(0,n.pathHelper)("/admin/rollouts")},At=t.rootPath=function(){return(0,n.pathHelper)("/")},Et=t.startOnboardingPath=function(e,t,a){return a?(0,n.pathHelper)("/start?email="+e+"&poi="+t+"&atc="+a):(0,n.pathHelper)("/start?email="+e+"&poi="+t)},Ot=t.studyGroupAttendPath=function(e){return(0,n.pathHelper)("/study-groups/attend/"+e)},Ct=t.studyGroupPath=function(e){return(0,n.pathHelper)("/study-groups/"+e)},Gt=t.studyGroupSlugPath=function(e){return(0,n.pathHelper)("/study-groups/"+e)},Lt=t.studyGroupsPath=function(){return(0,n.pathHelper)("/study-groups")},Tt=t.styleGuidePath=function(){return(0,n.pathHelper)("/style-guide")},It=t.switchUserTrackPath=function(e){return(0,n.pathHelper)("/user/"+e.id+"/switch_track")},Ht=t.trackExplorerPath=function(){return(0,n.pathHelper)("/admin/tracks")},Bt=t.userAdminPath=function(e){return(0,n.pathHelper)("/"+e+"/admin")},Ft=t.userAssessmentsPath=function(e){return(0,n.pathHelper)("/tracks/"+e+"/assessments")},zt=t.userPath=function(e){return(0,n.pathHelper)("/"+e)},qt=t.userRoleForUserPath=function(e,t,a){return(0,n.pathHelper)("/users/"+e+"/user_roles/"+t+"/"+a)},Wt=t.userSearchPath=function(e){return(0,n.pathHelper)("/users/search/"+e)};t.default={accountManagementPath:r,apiActivateBatchTrackPath:s,apiActivityFeedPath:o,apiAnnouncementPath:i,apiBatchLessonPath:u,apiBatchProjectReviewsPath:l,apiBatchStudentsPath:c,apiBatchTrackDeployedPath:d,apiBatchTrackPath:p,apiBatchTrackProgressPath:h,apiBatchTracksForUserPath:f,apiBatchTracksPath:m,apiBatchUserRolesPath:g,apiBatchesForUserPath:v,apiBatchesLitePath:y,apiBatchManagementStudentSearchPath:P,apiBatchManagementRosterDownloadsPath:b,apiBatchesPath:_,apiCloneTopic:k,apiConnectedGithubPath:M,apiCreateStudentFeedbackPath:j,apiCurriculumPath:D,apiCurriculumSearchPath:R,apiCurriculumTemplatesPath:w,apiDeploymentsPath:U,apiGlobalSearchPath:S,apiGraduationPath:x,apiGraduationSignOffPath:N,apiInvitationsPath:A,apiLessonStudyGroupsPath:E,apiLiveReviewAssessmentsPath:O,apiLiveReviewAttemptPath:G,apiLiveReviewAttemptInstructorsPath:C,apiLiveReviewAttemptsPath:L,apiLiveReviewCompletePath:T,apiLiveReviewPath:I,apiLiveReviewPendingFeedbackPath:H,apiLiveReviewProjectsPath:B,apiLiveReviewScheduledPath:F,apiLiveReviewUnscheduledPath:z,apiLiveReviewsPath:q,apiMapMessagesPath:W,apiMapSubmissionsPath:V,apiOrganizationAdminsPath:$,apiOrganizationsLitePath:Q,apiOrganizationsPath:K,apiPath:J,apiPostSocialSharePath:Y,apiRolesPath:Z,apiSchedulePath:X,apiSelfReviewPath:ee,apiSocialSharePath:te,apiStudentAddableBatchesPath:ae,apiStudentProfileTimeline:ne,apiStudyGroupActivityFeedPath:re,apiStudyGroupMessagesPath:se,apiStudyGroupResolvePath:oe,apiStudyGroupsPath:ie,apiTeamsPath:ue,apiTrackActiveBatchesPath:le,apiTracksPath:ce,apiUpdateReadme:de,apiUserAuthIntegrationsShowPath:pe,apiUserMostRelevantAssignedRepoPath:he,apiUserPath:fe,apiUserRoleForUserPath:me,apiUserRolesRootPath:ge,apiUserSearchPath:ve,apiUserSuggestionsPathUnrestricted:ye,apiUserSwitchBatchPath:_e,apiUserSwitchTrackPath:be,apiUserTracksForSwitcherPath:Pe,apiUserTracksPath:ke,apiUsersConfirmAccountPath:Me,apiUsersPath:je,apiUsersProgressPath:De,assessmentDashboardPath:Re,assessmentPath:we,assessmentUserDashboardPath:Ue,assignmentsAppPath:Se,batchAdminsPath:xe,batchLessonPath:Ne,batchManagementRostersPath:Ae,batchPath:Ee,batchProgressPath:Oe,batchProjectReviewsPath:Ce,batchSettingsPath:Ge,batchesPath:Le,billingPath:Te,blogBlogPostPath:Ie,blogEditPath:He,blogLinkPath:Be,blogPath:Fe,blogPostPublishPath:ze,blogPostSavePath:qe,blogPostSubmitPath:We,blogPostsPath:Ve,careerServicesAppPath:$e,coursesPath:Qe,cpbApplicationsPath:Ke,cpbUpgradePath:Je,curriculumAppPath:Ye,curriculumCreateLessonPath:Ze,curriculumDeployerPath:Xe,curriculumSearchPath:et,curriculumShowLessonContentPath:tt,curriculumShowLessonPath:at,curriculumShowLessonStatsPath:nt,curriculumShowTrackDeploymentsPath:rt,curriculumShowTrackHealthPath:st,curriculumShowTrackPath:ot,destroyUserSessionPath:it,educationManagementPath:ut,enrollmentsLandingPath:lt,expertChatPath:ct,friendsPath:dt,getOnboardingPath:pt,globalSearchPath:ht,graduationAdminDashboardPath:ft,ileDownloadPath:mt,ilePath:gt,jsaReportingPath:vt,lessonsPath:yt,magazinePath:_t,newStudentApplicationPath:bt,omniAuthorizePath:Pt,onboardingDocumentsPath:kt,organizationAdminsPath:Mt,organizationPath:jt,organizationsPath:Dt,publicLessonRegisterPath:Rt,refreshGithubTokenPath:wt,registerCustomDomainPath:Ut,resetProgressPath:St,rolesAndPermissionsPath:xt,rolloutsPath:Nt,rootPath:At,startOnboardingPath:Et,studyGroupAttendPath:Ot,studyGroupPath:Ct,studyGroupSlugPath:Gt,studyGroupsPath:Lt,styleGuidePath:Tt,switchUserTrackPath:It,trackExplorerPath:Ht,userAdminPath:Bt,userAssessmentsPath:Ft,userPath:zt,userRoleForUserPath:qt,userSearchPath:Wt}}).call(t,a("../../shared/node_modules/jquery/dist/jquery.js"))},"./app/javascript/deprecated/lib/server-time.js":function(e,t,a){"use strict";var n=a("../../shared/node_modules/moment/moment.js");e.exports={now:function(){if("undefined"===typeof this.serverOffset)throw new Error("you must sync this module with the current server time first, call sync with a trusted timestamp representing current time on the server");return n().add(this.serverOffset,"milliseconds")},sync:function(e){this.serverOffset=n(e).diff(n())},timeSince:function(e){return n(e).from(this.now())}}},"./app/javascript/deprecated/lib/sound-manager.js":function(e,t,a){"use strict";var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a("../../shared/node_modules/sound-effect-manager/sound-effect-manager.js"),o=(n=s)&&n.__esModule?n:{default:n},i=a("./app/javascript/lib/utils/path-helper.js");var u=null,l=function(){function e(){var t=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u||(u=this,this._sounds={"new-activity":(0,i.assetHostHelper)("/assets/new-activity.mp3")},this.sm=new o.default,Object.keys(this._sounds).forEach(function(e){var a=t._sounds[e];t.sm.loadFile(a,e)})),u}return r(e,[{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.sm.play(e,t)}},{key:"stop",value:function(e){return this.sm.stop(e)}}]),e}();e.exports=new l},"./app/javascript/deprecated/lib/textcomplete.js":function(e,t,a){"use strict";var n=a("../../shared/node_modules/jquery/dist/jquery.js");a("../../shared/node_modules/jquery-textcomplete/dist/jquery.textcomplete.js"),n.fn.textcomplete.getCaretCoordinates=a("../../shared/node_modules/textarea-caret/index.js")},"./app/javascript/deprecated/models/user.js":function(e,t,a){"use strict";var n,r=a("../../shared/node_modules/supermodel/supermodel.js"),s=(n=r)&&n.__esModule?n:{default:n};e.exports=s.default.Model.extend({title:function(){return this.get("full_name")},isInstructor:function(){return!!this.get("instructor")||!!this.get("admin")||!!this.get("super_admin")},hasCompleteAccount:function(){return"complete"==this.get("current_account_level")},hasConfirmedAccount:function(){return"confirmed"==this.get("current_account_level")},inCommunityBatch:function(){return this.get("in_community_batch")},isStudent:function(){return!this.get("admin")&&!this.get("instructor")}})},"./app/javascript/deprecated/shared-react-components/TimeAgo.jsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a("../../shared/node_modules/react/index.js"),s=u(r),o=u(a("../../shared/node_modules/react-timeago/lib/index.js")),i=u(a("./app/javascript/deprecated/lib/server-time.js"));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),n(t,[{key:"render",value:function(){return s.default.createElement(o.default,this.props)}}]),t}();l.defaultProps={formatter:function(e,t,a,n){return i.default.timeSince(n)}},t.default=l},"./app/javascript/deprecated/vendor/autolink-min.js":function(e,t,a){"use strict";(function(){var e=[].slice;String.prototype.autoLink=function(){var t,a,n,r,s,o;return s=/(^|[\s\n]|<br\/?>)((?:(?:ht|f)tp(?:s?)\:\/\/|~\/|\/)?(?:\w+:\w+@)?((?:(?:[-\w\d{1-3}]+\.)+(?:com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\.uk|ac\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2}))|((\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)(\.(\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)){3}))(?::[\d]{1,5})?(?:(?:(?:\/(?:[-\w~!$+|.,=]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[-\w~!$ |\/.,*:;=]|%[a-f\d]{2})*)?)/gi,0<(r=1<=arguments.length?e.call(arguments,0):[]).length?(n=r[0],a=function(){var e;for(t in e=[],n)o=n[t],"callback"!==t&&e.push(" "+t+"='"+o+"'");return e}().join(""),this.replace(s,function(e,t,r){return""+t+(("function"===typeof n.callback?n.callback(r):void 0)||"<a href='"+(r.match(/(:?(?:ht|f)tp(?:s?)\:\/\/)/)?r:"http://"+r)+"'"+a+">"+r+"</a>")})):this.replace(s,"$1<a href='$2'>$2</a>")}}).call(void 0)},"./app/javascript/lib/shared-react-components/InlineSVG.jsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=o(a("../../shared/node_modules/react/index.js")),s=o(a("../../shared/node_modules/prop-types/index.js"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.id,a=e.svgRole,s=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["id","svgRole"]);return r.default.createElement("svg",n({},s,{role:a,"data-testid":"js-inline-svg"}),r.default.createElement("use",{href:gon.sprite_filepath+"#"+t,xlinkHref:gon.sprite_filepath+"#"+t}))}i.defaultProps={svgRole:"img"},i.propTypes={id:s.default.string.isRequired,className:s.default.string,fill:s.default.string,stroke:s.default.string,width:s.default.oneOfType([s.default.string,s.default.number]),height:s.default.oneOfType([s.default.string,s.default.number]),onClick:s.default.func,svgRole:s.default.string},t.default=i},"./app/javascript/lib/shared-react-components/UserAvatar.jsx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.avatarSizes=void 0;var n=s(a("../../shared/node_modules/react/index.js")),r=s(a("../../shared/node_modules/prop-types/index.js"));function s(e){return e&&e.__esModule?e:{default:e}}var o={default:140,xsmall:18,small:32,medium:64,large:96,xlarge:128,xxlarge:330},i=function(e){var t=e.src,a=e.alt,r=e.className,s=e.size,i=t+"?s="+2*o[s];return n.default.createElement("img",{src:i,alt:a,className:r})};i.defaultProps={size:"default",alt:"User avatar",className:null},i.propTypes={src:r.default.string.isRequired,size:r.default.oneOf(Object.keys(o)),alt:r.default.string,className:r.default.string},t.avatarSizes=o,t.default=i},"./app/javascript/lib/utils/app-config.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.appConfig=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"_loadGonConfig",{enumerable:!0,writable:!0,value:function(){Object.assign(t,gon)}}),this._loadGonConfig()}},"./app/javascript/lib/utils/path-helper.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assetHostHelper=t.pathHelper=t.generateUrl=void 0;var n=a("./app/javascript/lib/utils/app-config.js"),r=t.generateUrl=function(e,t){return e?""+e+t:t};t.pathHelper=function(e){return r(n.appConfig.relative_url_root,e)},t.assetHostHelper=function(e){var t=null===n.appConfig.asset_host?null:"//"+n.appConfig.asset_host;return r(t,e)}},"./app/javascript/lib/utils/textHelper.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.doesTextMatch=function(e,t){return e.toLowerCase()===t.toLowerCase()},t.titleize=function(e){return e.replace(/_/g," ").replace(/([A-Z])/g," $1").replace(/\b[a-z]/g,function(e){return e.toUpperCase()}).replace(/\bide\b/gi,"IDE")};var n=t.fullName=function(e,t){return((e||"")+" "+(t||"")).trim()};t.userDisplayName=function(e){var t=e.firstName,a=e.lastName,r=e.githubUsername,s=e.learnUuid,o=e.learnUsername;return t&&t.length?n(t,a):o&&o.length?o:r&&r.length?r:s&&s.length?"Learn User "+s.match(/[^-]*/)[0]:void 0},t.slugify=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(" ").join("_").toLowerCase()}},"./app/javascript/packs/deprecated/flatchat-student.js":function(e,t,a){"use strict";a("./app/javascript/deprecated/lib/sails.io.js"),a("./app/javascript/deprecated/flatchat-student/app.js")},"ignored /var/app/shared/node_modules/engine.io-client/lib/transports ws":function(e,t){}},["./app/javascript/packs/deprecated/flatchat-student.js"]);
//# sourceMappingURL=flatchat-student-bd8611f7b40b8ced3f7d.js.map